extern printf(fmt: *byte, ...) i32;

fn main() i32 {
    var arr: [i32; 10] = [0; 10];
    // 手动初始化数组
    arr[0] = 0;
    arr[1] = 1;
    arr[2] = 2;
    arr[3] = 3;
    arr[4] = 4;
    arr[5] = 5;
    arr[6] = 6;
    arr[7] = 7;
    arr[8] = 8;
    arr[9] = 9;
    
    const ptr: *i32 = &arr[0];
    
    // 测试常量索引
    const val1: i32 = ptr[0];  // 应该展开为 *(ptr + 0)
    const val2: i32 = ptr[5];  // 应该展开为 *(ptr + 5)
    printf("val1 = %d, val2 = %d\n", val1, val2);
    
    // 测试变量索引
    var i: i32 = 3;
    const val3: i32 = ptr[i];  // 应该展开为 *(ptr + i)
    printf("val3 = %d\n", val3);
    
    // 测试循环中的变量索引
    for 0..10 |idx| {
        const value: i32 = ptr[idx];  // 应该展开为 *(ptr + idx)
        printf("arr[%d] = %d\n", idx, value);
    }
    
    return 0;
}

