// 测试正确的切片语法（符合Uya规范）
extern printf(fmt: *byte, ...) i32;

fn main() i32 {
    const arr: [i32: 10] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

    // 基本切片语法：slice(arr, start, len)
    // slice(arr, 2, 3) 表示从索引2开始，长度为3 -> [2, 3, 4]
    const slice1: [i32: 3] = slice(arr, 2, 3);
    printf("slice(arr, 2, 3): ");
    for (iter(&slice1)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 使用负数索引的切片
    // slice(arr, -3, 3) 表示从倒数第3个元素开始，长度为3 -> [7, 8, 9]
    const slice2: [i32: 3] = slice(arr, -3, 3);
    printf("slice(arr, -3, 3): ");
    for (iter(&slice2)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 从某个索引到末尾
    // slice(arr, 7, 3) 表示从索引7开始，长度为3 -> [7, 8, 9]
    const slice3: [i32: 3] = slice(arr, 7, 3);
    printf("slice(arr, 7, 3): ");
    for (iter(&slice3)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 从开头开始
    // slice(arr, 0, 3) 表示从索引0开始，长度为3 -> [0, 1, 2]
    const slice4: [i32: 3] = slice(arr, 0, 3);
    printf("slice(arr, 0, 3): ");
    for (iter(&slice4)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 从开头到倒数第几个元素
    // slice(arr, 0, 9) 表示从索引0开始，长度为9 -> [0, 1, 2, 3, 4, 5, 6, 7, 8]
    const slice5: [i32: 9] = slice(arr, 0, 9);
    printf("slice(arr, 0, 9): ");
    for (iter(&slice5)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 使用负数索引的范围
    // slice(arr, -5, 3) 表示从倒数第5个开始，长度为3 -> [5, 6, 7]
    const slice6: [i32: 3] = slice(arr, -5, 3);
    printf("slice(arr, -5, 3): ");
    for (iter(&slice6)) |item| {
        printf("%d ", item);
    }
    printf("\n");

    // 空切片情况
    const slice7: [i32: 0] = slice(arr, 5, 0);
    printf("slice(arr, 5, 0): (empty slice)\n");

    // 单元素切片
    const slice8: [i32: 1] = slice(arr, 4, 1);
    printf("slice(arr, 4, 1): %d\n", slice8[0]);

    return 0;
}