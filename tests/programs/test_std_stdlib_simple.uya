// 测试 std.c.stdlib 模块（简化版，只测试字符串转换函数）
// 测试：字符串转数字函数

use std.c.stdlib.atoi;
use std.c.stdlib.atol;
use std.c.stdlib.atof;

fn main() i32 {
    // ============================================================
    // 测试 1: atoi（字符串转整数）
    // ============================================================
    {
        var str1: [byte: 10] = [];
        str1[0] = 49 as byte;  // '1'
        str1[1] = 50 as byte;  // '2'
        str1[2] = 51 as byte;  // '3'
        str1[3] = 0 as byte;   // '\0'
        const n1: i32 = atoi(&str1[0] as &byte);
        if n1 != 123 {
            return 1;
        }
        
        var str2: [byte: 10] = [];
        str2[0] = 45 as byte;  // '-'
        str2[1] = 52 as byte;  // '4'
        str2[2] = 53 as byte;  // '5'
        str2[3] = 54 as byte;  // '6'
        str2[4] = 0 as byte;   // '\0'
        const n2: i32 = atoi(&str2[0] as &byte);
        if n2 != 0 - 456 {
            return 2;
        }
    }
    
    // ============================================================
    // 测试 2: atol（字符串转长整数）
    // ============================================================
    {
        var str3: [byte: 20] = [];
        str3[0] = 49 as byte;  // '1'
        str3[1] = 50 as byte;  // '2'
        str3[2] = 51 as byte;  // '3'
        str3[3] = 52 as byte;  // '4'
        str3[4] = 53 as byte;  // '5'
        str3[5] = 54 as byte;  // '6'
        str3[6] = 55 as byte;  // '7'
        str3[7] = 56 as byte;  // '8'
        str3[8] = 57 as byte;  // '9'
        str3[9] = 48 as byte;  // '0'
        str3[10] = 0 as byte;  // '\0'
        const n3: i64 = atol(&str3[0] as &byte);
        if n3 != 1234567890 {
            return 3;
        }
    }
    
    // ============================================================
    // 测试 3: atof（字符串转浮点数）
    // ============================================================
    {
        var str4: [byte: 20] = [];
        str4[0] = 51 as byte;  // '3'
        str4[1] = 46 as byte;  // '.'
        str4[2] = 49 as byte;  // '1'
        str4[3] = 52 as byte;  // '4'
        str4[4] = 0 as byte;   // '\0'
        const f1: f64 = atof(&str4[0] as &byte);
        // 浮点数比较需要容差
        if f1 < 3.13 || f1 > 3.15 {
            return 4;
        }
    }
    
    return 0;  // 所有测试通过
}

