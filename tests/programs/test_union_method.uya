// 联合体方法（外部方法块）：IntOrFloat 有 as_f64、is_int 方法
// 返回 0 表示通过

union IntOrFloat {
    i: i32,
    f: f64,
}

IntOrFloat {
    fn as_f64(self: &Self) f64 {
        return match *self {
            .i(x) => x as f64,
            .f(x) => x,
        };
    }
    fn is_int(self: &Self) bool {
        return match *self {
            .i(_) => true,
            .f(_) => false,
        };
    }
}

fn main() i32 {
    const vi: IntOrFloat = IntOrFloat.i(42);
    const vf: IntOrFloat = IntOrFloat.f(3.14);

    const as_float: f64 = vi.as_f64();
    if as_float < 41.9 || as_float > 42.1 { return 1; }

    const is_int_val: bool = vi.is_int();
    if !is_int_val { return 2; }

    const as_float2: f64 = vf.as_f64();
    if as_float2 < 3.13 || as_float2 > 3.15 { return 3; }

    const is_int2: bool = vf.is_int();
    if is_int2 { return 4; }

    return 0;
}
