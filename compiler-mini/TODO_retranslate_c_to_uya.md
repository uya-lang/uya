# C ç‰ˆæœ¬ä»£ç é‡æ–°ç¿»è¯‘åˆ°è‡ªä¸¾ç‰ˆæœ¬ TODO

> **âš ï¸ é‡è¦æç¤ºï¼šé‡æ–°è¦†ç›–å¼ç¿»è¯‘** 
> 
> **æœ¬ç¿»è¯‘ä»»åŠ¡é‡‡ç”¨é‡æ–°è¦†ç›–å¼ç¿»è¯‘ç­–ç•¥ï¼Œè€Œéå¢é‡å¼ä¿®æ”¹ï¼š**
> 1. **å®Œå…¨å¿½ç•¥ç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°**ï¼šä¸è¦åŸºäºç°æœ‰ `uya-src/` ç›®å½•ä¸‹çš„ä»£ç è¿›è¡Œä¿®æ”¹
> 2. **å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬é‡æ–°ç¿»è¯‘**ï¼šä»¥ `src/` ç›®å½•ä¸‹çš„ C ä»£ç ä¸ºå”¯ä¸€å‚è€ƒï¼Œä»å¤´å¼€å§‹ç¿»è¯‘
> 3. **è¦†ç›–å¼æ›¿æ¢**ï¼šç¿»è¯‘æ—¶åº”è¯¥å®Œå…¨è¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬ä»£ç ï¼Œè€Œä¸æ˜¯åœ¨ç°æœ‰ä»£ç åŸºç¡€ä¸Šä¿®æ”¹
> 4. **åœ¨å¼€å§‹ç¿»è¯‘ä¹‹å‰ï¼Œå¿…é¡»å…ˆé˜…è¯» `spec/UYA_MINI_SPEC.md` è¯­æ³•è§„èŒƒ**ï¼Œäº†è§£ Uya Mini çš„å®Œæ•´è¯­æ³•ã€ç±»å‹ç³»ç»Ÿå’Œè¯­ä¹‰è§„åˆ™
> 5. **âš ï¸ å®Œæˆä»»åŠ¡åå¿…é¡»åŠæ—¶æ›´æ–° TODO**ï¼šæ¯å®Œæˆä¸€ä¸ªå‡½æ•°æˆ–æ–‡ä»¶çš„ç¿»è¯‘ï¼Œç«‹å³æ›´æ–°æœ¬æ–‡æ¡£ä¸­å¯¹åº”çš„æ£€æŸ¥æ¡†ï¼ˆ`[ ]` â†’ `[x]`ï¼‰å’ŒçŠ¶æ€æ ‡è®°ï¼Œç¡®ä¿è¿›åº¦è·Ÿè¸ªå‡†ç¡®

---

## ğŸ“š ç¿»è¯‘å‰å‡†å¤‡

### 1. é˜…è¯»è¯­æ³•è§„èŒƒï¼ˆå¿…é¡»ï¼‰

**æ–‡ä»¶è·¯å¾„ï¼š** `compiler-mini/spec/UYA_MINI_SPEC.md`

**é‡ç‚¹å…³æ³¨ç« èŠ‚ï¼š**
- ç±»å‹ç³»ç»Ÿï¼ˆåŸºæœ¬ç±»å‹ã€æŒ‡é’ˆã€æ•°ç»„ã€ç»“æ„ä½“ã€æšä¸¾ï¼‰
- è¡¨è¾¾å¼ç±»å‹æ¨æ–­è§„åˆ™
- ç±»å‹è½¬æ¢è§„åˆ™
- å˜é‡å£°æ˜å’Œåˆå§‹åŒ–è§„åˆ™
- å‡½æ•°å£°æ˜å’Œè°ƒç”¨è§„åˆ™
- æ§åˆ¶æµè¯­å¥è§„åˆ™

### 2. ç†è§£ç¿»è¯‘åŸåˆ™

> **âš ï¸ æ ¸å¿ƒåŸåˆ™ï¼šé‡æ–°è¦†ç›–å¼ç¿»è¯‘**
> 
> **ç¿»è¯‘æ—¶å¿…é¡»éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š**
> 1. **å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬é€»è¾‘é‡æ–°ç¿»è¯‘**ï¼š
>    - **ä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°**
>    - **ä¸è¦åŸºäºç°æœ‰ Uya ç‰ˆæœ¬è¿›è¡Œä¿®æ”¹**
>    - **å®Œå…¨ä»¥ C ç‰ˆæœ¬ä¸ºå”¯ä¸€å‚è€ƒï¼Œä»å¤´å¼€å§‹ç¿»è¯‘**
>    - ä¿æŒä¸ C ç‰ˆæœ¬å®Œå…¨ä¸€è‡´çš„è¡Œä¸º
> 2. **æ’é™¤ C99 ç›¸å…³ä»£ç **ï¼šä¸ç¿»è¯‘ `codegen/c99/` ç›®å½•ä¸‹çš„ä»£ç 
> 3. **ä¿æŒå‡½æ•°ç­¾åä¸€è‡´**ï¼šå‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼ç±»å‹å¿…é¡»ä¸€è‡´
> 4. **ä¿æŒé”™è¯¯å¤„ç†é€»è¾‘ä¸€è‡´**ï¼šé”™è¯¯æŠ¥å‘Šã€æ”¾å®½æ£€æŸ¥çš„é€»è¾‘å¿…é¡»ä¸€è‡´
> 5. **æ³¨æ„ç±»å‹ç³»ç»Ÿå·®å¼‚**ï¼ˆåœ¨ç¿»è¯‘æ—¶è¿›è¡Œè½¬æ¢ï¼Œä½†é€»è¾‘å¿…é¡»ä¸€è‡´ï¼‰ï¼š
   - **âš ï¸ Uya æ²¡æœ‰è”åˆä½“ï¼ˆunionï¼‰**ï¼šå¿…é¡»å°† C ç‰ˆæœ¬çš„ `union` æ”¹ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µ
     - C: `union { int i; bool b; }` â†’ Uya: `struct { i: int; b: bool; }`
     - C: `type.data.array.element_type` â†’ Uya: `type.element_type`ï¼ˆç›´æ¥è®¿é—®å­—æ®µï¼‰
   - C ç‰ˆæœ¬ä½¿ç”¨ `->` è®¿é—®æŒ‡é’ˆæˆå‘˜ï¼ŒUya ç‰ˆæœ¬ä½¿ç”¨ `.` è®¿é—®
   - C ç‰ˆæœ¬ä½¿ç”¨ `*` è§£å¼•ç”¨ï¼ŒUya ç‰ˆæœ¬ç›´æ¥è®¿é—®
   - **âš ï¸ æšä¸¾è®¿é—®å·®å¼‚**ï¼šæšä¸¾è¦ç”¨ `enum_type.field` å½¢å¼è®¿é—®
     - C: `enum_type->data.enum_type.field_name`
     - Uya: `enum_type.field_name`
   - **âš ï¸ Uya ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—**ï¼šå¿…é¡»å°† `ptr + i` è½¬æ¢ä¸º `&ptr[i]`
   - **âš ï¸ Uya ä¸æ”¯æŒå‡½æ•°å‰å‘å£°æ˜**ï¼šå¿…é¡»é‡æ–°ç»„ç»‡å‡½æ•°é¡ºåºæˆ–ä½¿ç”¨å‡½æ•°è¡¨æœºåˆ¶

### 3. ç¿»è¯‘æ£€æŸ¥æ¸…å•

å¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥ï¼š
- [ ] å‡½æ•°ç­¾åæ˜¯å¦ä¸€è‡´ï¼ˆå‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼‰
- [ ] é€»è¾‘æµç¨‹æ˜¯å¦ä¸€è‡´
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦ä¸€è‡´
- [ ] æ”¾å®½æ£€æŸ¥çš„é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ç±»å‹æ¨æ–­é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ç¬¦å·è¡¨æ“ä½œæ˜¯å¦ä¸€è‡´
- [ ] å‡½æ•°è¡¨æ“ä½œæ˜¯å¦ä¸€è‡´

---

## ğŸ“‹ éœ€è¦ç¿»è¯‘çš„æ–‡ä»¶åˆ—è¡¨

### æ ¸å¿ƒæ¨¡å—ï¼ˆä¼˜å…ˆçº§ï¼šP0ï¼‰

#### 1. `src/checker.c` â†’ `uya-src/checker.uya`
**çŠ¶æ€ï¼š** âœ… æ ¸å¿ƒæ¡†æ¶å·²å®Œæˆï¼Œå·²é€šè¿‡è¯­æ³•åˆ†æ
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** ç±»å‹æ£€æŸ¥å™¨æ ¸å¿ƒæ¨¡å—ï¼Œå·²å®Œæˆæ ¸å¿ƒæ¡†æ¶å’Œä¸»è¦å‡½æ•°çš„ç¿»è¯‘
**âš ï¸ ç¿»è¯‘ç­–ç•¥ï¼š** å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬é‡æ–°è¦†ç›–å¼ç¿»è¯‘ï¼Œä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°
**å½“å‰è¿›åº¦ï¼š** 
- âœ… å·²å®Œæˆï¼šåŸºç¡€ç±»å‹å®šä¹‰ã€ç¬¦å·è¡¨å’Œå‡½æ•°è¡¨æ“ä½œã€ç±»å‹ç³»ç»Ÿæ ¸å¿ƒã€ç±»å‹æ¨æ–­ã€ä¸»è¦æ£€æŸ¥å‡½æ•°
- âš ï¸ å¾…å®Œå–„ï¼šéƒ¨åˆ†è¡¨è¾¾å¼æ£€æŸ¥å‡½æ•°ï¼ˆå¯åœ¨åç»­æ ¹æ®éœ€è¦æ·»åŠ ï¼‰
- âœ… è¯­æ³•æ£€æŸ¥ï¼šå·²é€šè¿‡è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æé˜¶æ®µ

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰ï¼š**

**å…¬å…±æ¥å£å‡½æ•°ï¼š**
- [x] `checker_init` - åˆå§‹åŒ– TypeChecker
- [x] `checker_get_error_count` - è·å–é”™è¯¯è®¡æ•°
- [x] `checker_check` - ç±»å‹æ£€æŸ¥ä¸»å‡½æ•°ï¼ˆä¸¤éæ£€æŸ¥ï¼‰

**é”™è¯¯æŠ¥å‘Šï¼š**
- [x] `checker_report_error` - æŠ¥å‘Šç±»å‹æ£€æŸ¥é”™è¯¯

**ç±»å‹ç³»ç»Ÿæ ¸å¿ƒå‡½æ•°ï¼š**
- [x] `type_from_ast` - ä» AST ç±»å‹èŠ‚ç‚¹åˆ›å»º Type ç»“æ„
- [x] `type_equals` - æ¯”è¾ƒä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸ç­‰
- [x] `type_can_implicitly_convert` - æ£€æŸ¥ç±»å‹æ˜¯å¦å¯ä»¥éšå¼è½¬æ¢

**ç±»å‹æ¨æ–­ï¼š**
- [x] `checker_infer_type` - æ¨æ–­è¡¨è¾¾å¼çš„ç±»å‹ï¼ˆæ ¸å¿ƒå‡½æ•°ï¼‰

**ç¬¦å·è¡¨å’Œå‡½æ•°è¡¨ï¼š**
- [x] `hash_string` - å­—ç¬¦ä¸²å“ˆå¸Œå‡½æ•°
- [x] `symbol_table_lookup` - åœ¨ç¬¦å·è¡¨ä¸­æŸ¥æ‰¾ç¬¦å·
- [x] `symbol_table_insert` - å‘ç¬¦å·è¡¨æ’å…¥ç¬¦å·
- [x] `function_table_lookup` - åœ¨å‡½æ•°è¡¨ä¸­æŸ¥æ‰¾å‡½æ•°ç­¾å
- [x] `function_table_insert` - å‘å‡½æ•°è¡¨æ’å…¥å‡½æ•°ç­¾å

**ä½œç”¨åŸŸç®¡ç†ï¼š**
- [x] `checker_enter_scope` - è¿›å…¥æ–°çš„ä½œç”¨åŸŸ
- [x] `checker_exit_scope` - é€€å‡ºå½“å‰ä½œç”¨åŸŸ

**AST èŠ‚ç‚¹æŸ¥æ‰¾ï¼š**
- [x] `find_struct_decl_from_program` - åœ¨ç¨‹åºèŠ‚ç‚¹ä¸­æŸ¥æ‰¾ç»“æ„ä½“å£°æ˜
- [x] `find_enum_decl_from_program` - åœ¨ç¨‹åºèŠ‚ç‚¹ä¸­æŸ¥æ‰¾æšä¸¾å£°æ˜
- [x] `find_struct_field_type` - æŸ¥æ‰¾ç»“æ„ä½“å­—æ®µçš„ç±»å‹

**ç±»å‹æ£€æŸ¥å‡½æ•°ï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰ï¼š**
- [x] `checker_check_node` - æ£€æŸ¥ AST èŠ‚ç‚¹ï¼ˆä¸»å…¥å£ï¼Œé€’å½’è°ƒç”¨å…¶ä»–æ£€æŸ¥å‡½æ•°ï¼‰- âœ… å·²å®Œæˆæ ¸å¿ƒæ¡†æ¶
- [x] `checker_register_fn_decl` - æ³¨å†Œå‡½æ•°å£°æ˜ï¼ˆç¬¬ä¸€éæ£€æŸ¥ï¼‰
- [x] `checker_check_fn_decl` - æ£€æŸ¥å‡½æ•°å£°æ˜ï¼ˆç¬¬äºŒéæ£€æŸ¥ï¼‰
- [x] `checker_check_var_decl` - æ£€æŸ¥å˜é‡å£°æ˜
- [x] `checker_check_struct_decl` - æ£€æŸ¥ç»“æ„ä½“å£°æ˜
- [x] `checker_check_expr_type` - æ£€æŸ¥è¡¨è¾¾å¼ç±»å‹æ˜¯å¦åŒ¹é…é¢„æœŸç±»å‹
- [x] `checker_check_array_access` - æ£€æŸ¥æ•°ç»„è®¿é—®è¡¨è¾¾å¼
- [x] `checker_check_member_access` - æ£€æŸ¥æˆå‘˜è®¿é—®è¡¨è¾¾å¼
- [x] `checker_check_call_expr` - æ£€æŸ¥å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼
- [x] `checker_check_binary_expr` - æ£€æŸ¥äºŒå…ƒè¡¨è¾¾å¼
- [x] `checker_check_unary_expr` - æ£€æŸ¥ä¸€å…ƒè¡¨è¾¾å¼
- [x] `checker_check_cast_expr` - æ£€æŸ¥ç±»å‹è½¬æ¢è¡¨è¾¾å¼
- [x] `checker_check_struct_init` - æ£€æŸ¥ç»“æ„ä½“åˆå§‹åŒ–è¡¨è¾¾å¼
- [x] `checker_check_alignof` - æ£€æŸ¥ alignof è¡¨è¾¾å¼
- [x] `checker_check_len` - æ£€æŸ¥ len è¡¨è¾¾å¼

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/checker.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/checker.uya`
- è¯­æ³•è§„èŒƒï¼š`compiler-mini/spec/UYA_MINI_SPEC.md`

#### 2. `src/parser.c` â†’ `uya-src/parser.uya`
**çŠ¶æ€ï¼š** âœ… æ ¸å¿ƒæ¡†æ¶å·²å®Œæˆï¼Œå·²é€šè¿‡è¯­æ³•åˆ†æ
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** è¯­æ³•åˆ†æå™¨ï¼Œè´Ÿè´£å°†è¯æ³•åˆ†æç»“æœè½¬æ¢ä¸º AST
**âš ï¸ ç¿»è¯‘ç­–ç•¥ï¼š** å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬é‡æ–°è¦†ç›–å¼ç¿»è¯‘ï¼Œä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°
**å½“å‰è¿›åº¦ï¼š** 
- âœ… å·²å®Œæˆï¼šåŸºç¡€æ¡†æ¶ã€è¾…åŠ©å‡½æ•°ã€ç±»å‹è§£æã€æ‰€æœ‰è¡¨è¾¾å¼è§£æå‡½æ•°ã€è¯­å¥è§£æå‡½æ•°ã€å£°æ˜è§£æå‡½æ•°ã€ä¸»è§£æå‡½æ•°
- âœ… è¯­æ³•æ£€æŸ¥ï¼šå·²é€šè¿‡è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æé˜¶æ®µï¼ˆæ—  linter é”™è¯¯ï¼‰
- ğŸ“Š ä»£ç ç»Ÿè®¡ï¼šå½“å‰çº¦ 3000+ è¡Œï¼ŒåŸ C æ–‡ä»¶çº¦ 2882 è¡Œ

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼š**

**åˆå§‹åŒ–å’Œè¾…åŠ©å‡½æ•°ï¼š**
- [x] `parser_init` - åˆå§‹åŒ– Parser
- [x] `parser_match` - æ£€æŸ¥å½“å‰ Token ç±»å‹æ˜¯å¦åŒ¹é…
- [x] `parser_consume` - æ¶ˆè´¹å½“å‰ Token å¹¶è·å–ä¸‹ä¸€ä¸ª
- [x] `parser_expect` - æœŸæœ›ç‰¹å®šç±»å‹çš„ Token
- [x] `arena_strdup` - ä» Arena å¤åˆ¶å­—ç¬¦ä¸²
- [x] `parser_peek_is_struct_init` - æ£€æŸ¥æ˜¯å¦æ˜¯ç»“æ„ä½“åˆå§‹åŒ–

**ç±»å‹è§£æï¼š**
- [x] `parser_parse_type` - è§£æç±»å‹ï¼ˆæ”¯æŒå‘½åç±»å‹ã€æŒ‡é’ˆç±»å‹å’Œæ•°ç»„ç±»å‹ï¼‰

**è¡¨è¾¾å¼è§£æï¼š**
- [x] `parser_parse_primary_expr` - è§£æåŸºç¡€è¡¨è¾¾å¼ï¼ˆå·²å®Œæˆï¼šæ•°å­—ã€å¸ƒå°”ã€å­—ç¬¦ä¸²ã€nullã€sizeofã€alignofã€lenã€æ ‡è¯†ç¬¦ã€å‡½æ•°è°ƒç”¨ã€ç»“æ„ä½“å­—é¢é‡ã€æ•°ç»„å­—é¢é‡ã€æ‹¬å·è¡¨è¾¾å¼ï¼‰
- [x] `parser_parse_unary_expr` - è§£æä¸€å…ƒè¡¨è¾¾å¼ï¼ˆ!, -, &, *ï¼Œå³ç»“åˆï¼‰
- [x] `parser_parse_cast_expr` - è§£æç±»å‹è½¬æ¢è¡¨è¾¾å¼ï¼ˆå³ç»“åˆï¼‰
- [x] `parser_parse_mul_expr` - è§£æä¹˜é™¤æ¨¡è¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_add_expr` - è§£æåŠ å‡è¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_rel_expr` - è§£ææ¯”è¾ƒè¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_eq_expr` - è§£æç›¸ç­‰æ€§è¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_and_expr` - è§£æé€»è¾‘ä¸è¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_or_expr` - è§£æé€»è¾‘æˆ–è¡¨è¾¾å¼ï¼ˆå·¦ç»“åˆï¼‰
- [x] `parser_parse_assign_expr` - è§£æèµ‹å€¼è¡¨è¾¾å¼ï¼ˆå³ç»“åˆï¼‰
- [x] `parser_parse_expression` - è§£æè¡¨è¾¾å¼ï¼ˆå®Œæ•´ç‰ˆæœ¬ï¼‰

**è¯­å¥è§£æï¼š**
- [x] `parser_parse_statement` - è§£æè¯­å¥
- [x] `parser_parse_block` - è§£æä»£ç å—

**å£°æ˜è§£æï¼š**
- [x] `parser_parse_declaration` - è§£æå£°æ˜
- [x] `parser_parse_function` - è§£æå‡½æ•°å£°æ˜
- [x] `parser_parse_extern_function` - è§£æ extern å‡½æ•°å£°æ˜
- [x] `parser_parse_struct` - è§£æç»“æ„ä½“å£°æ˜
- [x] `parser_parse_enum` - è§£ææšä¸¾å£°æ˜
- [x] `parser_parse_var_decl` - è§£æå˜é‡å£°æ˜ï¼ˆåœ¨è¯­å¥ä¸­ï¼Œå·²é›†æˆåˆ° parser_parse_statementï¼‰

**ä¸»è§£æå‡½æ•°ï¼š**
- [x] `parser_parse` - è§£æä¸»å‡½æ•°
- [x] `parser_parse_program` - è§£æç¨‹åº

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/parser.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/parser.uya`

#### 3. `src/lexer.c` â†’ `uya-src/lexer.uya`
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆä» C ç‰ˆæœ¬è¦†ç›–å¼ç¿»è¯‘ï¼‰
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** è¯æ³•åˆ†æå™¨ï¼Œè´Ÿè´£å°†æºä»£ç è½¬æ¢ä¸ºè¯æ³•å•å…ƒ

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼š**
- [x] `lexer_init` - åˆå§‹åŒ–è¯æ³•åˆ†æå™¨
- [x] `lexer_next_token` - è·å–ä¸‹ä¸€ä¸ªè¯æ³•å•å…ƒ
- [x] `read_string` - è¯»å–å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰
- [x] `read_number` - è¯»å–æ•°å­—å­—é¢é‡ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰
- [x] `read_identifier_or_keyword` - è¯»å–æ ‡è¯†ç¬¦æˆ–å…³é”®å­—ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰
- [x] è¾…åŠ©å‡½æ•°ï¼špeek_charã€advance_charã€skip_whitespace_and_commentsã€is_keywordã€arena_copy_strã€make_token

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/lexer.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/lexer.uya`

#### 4. `src/ast.c` â†’ `uya-src/ast.uya`
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆä» C ç‰ˆæœ¬è¦†ç›–å¼ç¿»è¯‘ï¼‰
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** AST èŠ‚ç‚¹åˆ›å»ºå’Œæ“ä½œ

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼š**
- [x] `ast_new_node` - åˆ›å»ºæ–°èŠ‚ç‚¹
- [x] `ast_merge_programs` - åˆå¹¶ç¨‹åºèŠ‚ç‚¹ï¼ˆå‚æ•°æ”¹ä¸º `[&ASTNode: MAX_MERGE_PROGRAMS]`ï¼Œå›  Uya æ— æŒ‡é’ˆæ•°ç»„ï¼‰

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/ast.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/ast.uya`

#### 5. `src/arena.c` â†’ `uya-src/arena.uya`
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆä» C ç‰ˆæœ¬è¦†ç›–å¼ç¿»è¯‘ï¼‰
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** å†…å­˜åˆ†é…å™¨ï¼ˆArenaï¼‰

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼š**
- [x] `arena_init` - åˆå§‹åŒ– Arena
- [x] `arena_alloc` - åˆ†é…å†…å­˜
- [x] `arena_reset` - é‡ç½® Arena
- [x] `align_size` - å¯¹é½å¤§å°ï¼ˆå†…éƒ¨è¾…åŠ©ï¼‰

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/arena.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/arena.uya`

#### 6. `src/main.c` â†’ `uya-src/main.uya`
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆä» C ç‰ˆæœ¬è¦†ç›–å¼ç¿»è¯‘ï¼‰
**ä¼˜å…ˆçº§ï¼š** P0ï¼ˆæœ€é«˜ï¼‰
**è¯´æ˜ï¼š** ç¼–è¯‘å™¨ä¸»ç¨‹åº

**éœ€è¦æ£€æŸ¥çš„å‡½æ•°ï¼š**
- [x] `uya_main` - ç¨‹åºå…¥å£ï¼ˆå¯¹åº” C çš„ mainï¼Œç”± bridge.c è°ƒç”¨ï¼‰
- [x] `read_file_content` - è¯»å–æ–‡ä»¶åˆ°ç¼“å†²åŒº
- [x] `print_usage` - æ‰“å°ä½¿ç”¨è¯´æ˜
- [x] `parse_args` - è§£æå‘½ä»¤è¡Œå‚æ•°ï¼ˆä½¿ç”¨ get_argc/get_argvï¼‰
- [x] `compile_files` - ä¸»ç¼–è¯‘æµç¨‹ï¼ˆè¯æ³•â†’è¯­æ³•â†’AST åˆå¹¶â†’ç±»å‹æ£€æŸ¥â†’C99 ä»£ç ç”Ÿæˆï¼‰

**å‚è€ƒæ–‡ä»¶ï¼š**
- C ç‰ˆæœ¬ï¼š`compiler-mini/src/main.c`
- è‡ªä¸¾ç‰ˆæœ¬ï¼š`compiler-mini/uya-src/main.uya`

### LLVM C API ä»£ç ç”Ÿæˆæ¨¡å—ï¼ˆä¼˜å…ˆçº§ï¼šP1ï¼‰

#### 7. `src/codegen/llvm_capi/main.c` â†’ `uya-src/codegen/llvm_capi/main.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** LLVM ä»£ç ç”Ÿæˆä¸»å…¥å£

#### 8. `src/codegen/llvm_capi/init.c` â†’ `uya-src/codegen/llvm_capi/init.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** LLVM åˆå§‹åŒ–

#### 9. `src/codegen/llvm_capi/function.c` â†’ `uya-src/codegen/llvm_capi/function.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** å‡½æ•°ä»£ç ç”Ÿæˆ

#### 10. `src/codegen/llvm_capi/expr.c` â†’ `uya-src/codegen/llvm_capi/expr.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** è¡¨è¾¾å¼ä»£ç ç”Ÿæˆ

#### 11. `src/codegen/llvm_capi/stmt.c` â†’ `uya-src/codegen/llvm_capi/stmt.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** è¯­å¥ä»£ç ç”Ÿæˆ

#### 12. `src/codegen/llvm_capi/types.c` â†’ `uya-src/codegen/llvm_capi/types.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** ç±»å‹ä»£ç ç”Ÿæˆ

#### 13. `src/codegen/llvm_capi/structs.c` â†’ `uya-src/codegen/llvm_capi/structs.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** ç»“æ„ä½“ä»£ç ç”Ÿæˆ

#### 14. `src/codegen/llvm_capi/enums.c` â†’ `uya-src/codegen/llvm_capi/enums.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** æšä¸¾ä»£ç ç”Ÿæˆ

#### 15. `src/codegen/llvm_capi/global.c` â†’ `uya-src/codegen/llvm_capi/global.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** å…¨å±€å˜é‡ä»£ç ç”Ÿæˆ

#### 16. `src/codegen/llvm_capi/vars.c` â†’ `uya-src/codegen/llvm_capi/vars.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** å˜é‡ä»£ç ç”Ÿæˆ

#### 17. `src/codegen/llvm_capi/funcs.c` â†’ `uya-src/codegen/llvm_capi/funcs.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** å‡½æ•°ç›¸å…³è¾…åŠ©å‡½æ•°

#### 18. `src/codegen/llvm_capi/utils.c` â†’ `uya-src/codegen/llvm_capi/utils.uya`
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P1
**è¯´æ˜ï¼š** å·¥å…·å‡½æ•°

### è¾…åŠ©æ¨¡å—ï¼ˆä¼˜å…ˆçº§ï¼šP2ï¼‰

#### 19. `src/str_utils.c` â†’ `uya-src/str_utils.uya`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ£€æŸ¥
**ä¼˜å…ˆçº§ï¼š** P2
**è¯´æ˜ï¼š** å­—ç¬¦ä¸²å·¥å…·å‡½æ•°

---

## ğŸ› ï¸ ç¿»è¯‘å·¥å…·ä½¿ç”¨è¯´æ˜

### ä½¿ç”¨ AI è¾…åŠ©ç¿»è¯‘

å½“ä½¿ç”¨ AIï¼ˆå¦‚ Cursorï¼‰è¿›è¡Œç¿»è¯‘æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **æä¾›ä¸Šä¸‹æ–‡**ï¼š
   ```
   æˆ‘éœ€è¦å°† C ç‰ˆæœ¬çš„å‡½æ•°ç¿»è¯‘æˆ Uya ç‰ˆæœ¬ã€‚
   - C ç‰ˆæœ¬æ–‡ä»¶ï¼šcompiler-mini/src/checker.c
   - è‡ªä¸¾ç‰ˆæœ¬æ–‡ä»¶ï¼šcompiler-mini/uya-src/checker.uya
   - è¯­æ³•è§„èŒƒï¼šcompiler-mini/spec/UYA_MINI_SPEC.md
   - ç›®æ ‡å‡½æ•°ï¼šchecker_check_var_decl
   ```

2. **è¦æ±‚ AI è¿›è¡Œé‡æ–°è¦†ç›–å¼ç¿»è¯‘**ï¼š
   ```
   âš ï¸ é‡è¦ï¼šé‡‡ç”¨é‡æ–°è¦†ç›–å¼ç¿»è¯‘ç­–ç•¥
   
   è¯·å…ˆé˜…è¯» compiler-mini/spec/UYA_MINI_SPEC.md ä¸­çš„ç±»å‹ç³»ç»Ÿç« èŠ‚ï¼Œ
   ç„¶åå®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬ compiler-mini/src/checker.c ä¸­çš„ checker_check_var_decl å‡½æ•°ï¼Œ
   ä»å¤´å¼€å§‹é‡æ–°ç¿»è¯‘ï¼Œå®Œå…¨è¦†ç›– compiler-mini/uya-src/checker.uya ä¸­çš„ç°æœ‰å®ç°ã€‚
   
   æ³¨æ„ï¼š
   - ä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°
   - ä¸è¦åŸºäºç°æœ‰ä»£ç è¿›è¡Œä¿®æ”¹
   - å®Œå…¨ä»¥ C ç‰ˆæœ¬ä¸ºå”¯ä¸€å‚è€ƒï¼Œä»å¤´å¼€å§‹ç¿»è¯‘
   - ç¿»è¯‘å®Œæˆåï¼Œå®Œå…¨è¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬ä»£ç 
   ```

3. **æä¾›é‡æ–°è¦†ç›–å¼ç¿»è¯‘æŒ‡ä»¤**ï¼š
   ```
   âš ï¸ é‡æ–°è¦†ç›–å¼ç¿»è¯‘ä»»åŠ¡
   
   ç›®æ ‡ï¼šå°† C ç‰ˆæœ¬å‡½æ•°å®Œå…¨é‡æ–°ç¿»è¯‘ä¸º Uya ç‰ˆæœ¬
   - C ç‰ˆæœ¬å‚è€ƒï¼šcompiler-mini/src/checker.c ä¸­çš„ checker_check_var_decl å‡½æ•°
   - ç›®æ ‡æ–‡ä»¶ï¼šcompiler-mini/uya-src/checker.uya
   - è¯­æ³•è§„èŒƒï¼šcompiler-mini/spec/UYA_MINI_SPEC.md
   
   è¦æ±‚ï¼š
   - å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬çš„é€»è¾‘é‡æ–°ç¿»è¯‘ï¼ˆä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬ï¼‰
   - å‡½æ•°ç­¾åå¿…é¡»ä¸€è‡´
   - é€»è¾‘æµç¨‹å¿…é¡»ä¸€è‡´
   - é”™è¯¯å¤„ç†å¿…é¡»ä¸€è‡´
   - æ”¾å®½æ£€æŸ¥çš„é€»è¾‘å¿…é¡»ä¸€è‡´
   - ç¿»è¯‘å®Œæˆåï¼Œå®Œå…¨è¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬å®ç°
   ```

### ç¿»è¯‘æ£€æŸ¥å‘½ä»¤

```bash
# 1. ç¼–è¯‘è‡ªä¸¾ç¼–è¯‘å™¨
cd /media/winger/_dde_home/winger/uya/compiler-mini/uya-src
./compile.sh -e --c99

# 2. è¿è¡Œæµ‹è¯•
cd /media/winger/_dde_home/winger/uya/compiler-mini
./tests/run_programs.sh --uya

# 3. å¯¹æ¯” C ç‰ˆæœ¬å’Œè‡ªä¸¾ç‰ˆæœ¬çš„è¾“å‡º
./build/compiler-mini tests/programs/<test>.uya -o /tmp/test_c.c --c99
./build/uya-compiler/compiler tests/programs/<test>.uya -o /tmp/test_uya.c
diff /tmp/test_c.c /tmp/test_uya.c
```

---

## ğŸ”„ ç¿»è¯‘å·¥ä½œæµç¨‹

### æ­¥éª¤ 1ï¼šé€‰æ‹©è¦ç¿»è¯‘çš„æ–‡ä»¶

1. ä»æ–‡ä»¶åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼ˆå»ºè®®æŒ‰ä¼˜å…ˆçº§é¡ºåºï¼‰
2. ç¡®è®¤è¯¥æ–‡ä»¶ä¸åœ¨ `codegen/c99/` ç›®å½•ä¸‹ï¼ˆC99 ä»£ç ä¸éœ€è¦ç¿»è¯‘ï¼‰

### æ­¥éª¤ 2ï¼šé˜…è¯» C ç‰ˆæœ¬ä»£ç 

1. æ‰“å¼€ C ç‰ˆæœ¬æ–‡ä»¶ï¼ˆå¦‚ `src/checker.c`ï¼‰
2. ç†è§£ä»£ç é€»è¾‘å’ŒåŠŸèƒ½
3. è¯†åˆ«å…³é”®å‡½æ•°å’Œæ•°æ®ç»“æ„
4. ç†è§£é”™è¯¯å¤„ç†å’Œæ”¾å®½æ£€æŸ¥çš„é€»è¾‘

### æ­¥éª¤ 3ï¼šé˜…è¯»è¯­æ³•è§„èŒƒ

1. æ‰“å¼€ `spec/UYA_MINI_SPEC.md`
2. é˜…è¯»ç›¸å…³çš„è¯­æ³•è§„åˆ™å’Œç±»å‹ç³»ç»Ÿè§„åˆ™
3. ç†è§£ç±»å‹æ¨æ–­è§„åˆ™å’Œç±»å‹è½¬æ¢è§„åˆ™
4. ç¡®è®¤ä»£ç å®ç°æ˜¯å¦ç¬¦åˆè§„èŒƒ

### æ­¥éª¤ 4ï¼šé‡æ–°è¦†ç›–å¼ç¿»è¯‘ï¼ˆâš ï¸ é‡è¦ï¼‰

> **âš ï¸ æ³¨æ„ï¼šæœ¬æ­¥éª¤é‡‡ç”¨é‡æ–°è¦†ç›–å¼ç¿»è¯‘ï¼Œè€Œéå¯¹æ¯”ä¿®æ”¹**
> 
> **ä¸è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š**
> - âŒ ä¸è¦æ‰“å¼€ç°æœ‰çš„ Uya ç‰ˆæœ¬æ–‡ä»¶è¿›è¡Œå¯¹æ¯”
> - âŒ ä¸è¦åŸºäºç°æœ‰ Uya ç‰ˆæœ¬è¿›è¡Œä¿®æ”¹
> - âŒ ä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°é€»è¾‘
> 
> **åº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼š**
> - âœ… å®Œå…¨ä»¥ C ç‰ˆæœ¬ä¸ºå”¯ä¸€å‚è€ƒ
> - âœ… ä»å¤´å¼€å§‹ç¿»è¯‘æ•´ä¸ªå‡½æ•°
> - âœ… ç¿»è¯‘å®Œæˆåï¼Œè¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬æ–‡ä»¶

### æ­¥éª¤ 5ï¼šé‡æ–°è¦†ç›–å¼ç¿»è¯‘ä»£ç 

> **âš ï¸ æ ¸å¿ƒåŸåˆ™ï¼šå®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬é‡æ–°ç¿»è¯‘ï¼Œè¦†ç›–ç°æœ‰å®ç°**

1. **å®Œå…¨æŒ‰ç…§ C ç‰ˆæœ¬çš„é€»è¾‘é‡æ–°ç¿»è¯‘**ï¼ˆä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬ï¼Œä¸è¦è‡ªå·±å‘æŒ¥ï¼‰
   - ä»¥ C ç‰ˆæœ¬ä»£ç ä¸ºå”¯ä¸€å‚è€ƒ
   - å¿½ç•¥ç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°
   - ä»å¤´å¼€å§‹ç¿»è¯‘æ•´ä¸ªå‡½æ•°
   - ç¿»è¯‘å®Œæˆåï¼Œå®Œå…¨è¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬ä»£ç 
2. **æ³¨æ„ç±»å‹ç³»ç»Ÿå·®å¼‚**ï¼š
   - **âš ï¸ Uya æ²¡æœ‰è”åˆä½“ï¼ˆunionï¼‰**ï¼šå¿…é¡»å°† C ç‰ˆæœ¬çš„ `union` æ”¹ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µ
     - C: `union { int i; bool b; }` â†’ Uya: `struct { i: int; b: bool; }`
     - C: `type.data.array.element_type` â†’ Uya: `type.element_type`ï¼ˆç›´æ¥è®¿é—®å­—æ®µï¼‰
     - C: `node->data.var_decl.name` â†’ Uya: `node.var_decl_name`ï¼ˆç›´æ¥è®¿é—®å­—æ®µï¼‰
   - C ç‰ˆæœ¬ä½¿ç”¨ `->` è®¿é—®æŒ‡é’ˆæˆå‘˜ï¼ŒUya ç‰ˆæœ¬ä½¿ç”¨ `.` è®¿é—®
     - C: `node->data.var_decl.name`
     - Uya: `node.var_decl_name`
   - C ç‰ˆæœ¬ä½¿ç”¨ `*` è§£å¼•ç”¨ï¼ŒUya ç‰ˆæœ¬ç›´æ¥è®¿é—®
     - C: `*array_type.data.array.element_type`
     - Uya: `array_type.element_type[0]`
   - C ç‰ˆæœ¬ä½¿ç”¨ `const char *`ï¼ŒUya ç‰ˆæœ¬ä½¿ç”¨ `&byte`
     - C: `const char *name`
     - Uya: `name: &byte`
   - **âš ï¸ æšä¸¾è®¿é—®å·®å¼‚**ï¼šæšä¸¾è¦ç”¨ `enum_type.field` å½¢å¼è®¿é—®
     - C: `enum_type->data.enum_type.field_name` æˆ– `enum_type.data.enum_type.field_name`
     - Uya: `enum_type.field_name`
3. **å¤„ç†æŒ‡é’ˆè¿ç®—**ï¼ˆâš ï¸ é‡è¦ï¼‰ï¼š
   - **Uya ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—**ï¼Œå¿…é¡»è½¬æ¢ä¸ºæ•°ç»„è®¿é—®
   - C: `ptr + i` â†’ Uya: `&ptr[i]`
   - C: `*(ptr + i)` â†’ Uya: `ptr[i]`
   - C: `ptr++` â†’ Uya: éœ€è¦é‡æ„ä¸ºæ•°ç»„è®¿é—®æˆ–ä½¿ç”¨ç´¢å¼•å˜é‡
   - æ‰€æœ‰æŒ‡é’ˆè¿ç®—éƒ½å¿…é¡»è½¬æ¢ä¸ºæ•°ç»„è®¿é—®å½¢å¼
4. **å¤„ç†å‡½æ•°å®šä¹‰é¡ºåº**ï¼ˆâš ï¸ é‡è¦ï¼‰ï¼š
   - **Uya ä¸æ”¯æŒå‡½æ•°å‰å‘å£°æ˜**ï¼Œå‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨å‰å®šä¹‰
   - é‡æ–°ç»„ç»‡å‡½æ•°é¡ºåºï¼Œå°†å‡½æ•°å®šä¹‰æ”¾åœ¨ä½¿ç”¨ä¹‹å‰
   - å¯¹äºéœ€è¦ç›¸äº’è°ƒç”¨çš„å‡½æ•°ï¼Œä½¿ç”¨å‡½æ•°è¡¨æœºåˆ¶ï¼ˆå¦‚ç±»å‹æ£€æŸ¥å™¨çš„ä¸¤éæ£€æŸ¥ï¼‰
5. **ä¿æŒå‡½æ•°ç­¾åä¸€è‡´**ï¼šå‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹å¿…é¡»å®Œå…¨ä¸€è‡´
6. **ä¿æŒé”™è¯¯å¤„ç†é€»è¾‘ä¸€è‡´**ï¼šé”™è¯¯æ£€æŸ¥ã€é”™è¯¯æŠ¥å‘Šã€æ”¾å®½æ£€æŸ¥çš„é€»è¾‘å¿…é¡»ä¸€è‡´
7. **ä¿æŒæ”¾å®½æ£€æŸ¥çš„é€»è¾‘ä¸€è‡´**ï¼šæ‰€æœ‰æ”¾å®½æ£€æŸ¥çš„æ¡ä»¶å’Œè¿”å›å€¼å¿…é¡»ä¸€è‡´

### æ­¥éª¤ 6ï¼šç¼–è¯‘å’Œæµ‹è¯•

1. é‡æ–°ç¼–è¯‘è‡ªä¸¾ç¼–è¯‘å™¨ï¼š
   ```bash
   cd /media/winger/_dde_home/winger/uya/compiler-mini/uya-src
   ./compile.sh -e --c99
   ```

2. è¿è¡Œæµ‹è¯•ï¼š
   ```bash
   cd /media/winger/_dde_home/winger/uya/compiler-mini
   ./tests/run_programs.sh --uya
   ```

3. æ£€æŸ¥æµ‹è¯•ç»“æœï¼š
   - å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œ**ç«‹å³æ›´æ–° TODO æ–‡ä»¶**ï¼Œæ ‡è®°å¯¹åº”å‡½æ•°ä¸ºå®Œæˆï¼ˆ`[ ]` â†’ `[x]`ï¼‰
   - å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œç»§ç»­è°ƒè¯•ï¼Œå¹¶åœ¨ä¿®å¤åæ›´æ–° TODO

### æ­¥éª¤ 7ï¼šéªŒè¯ä¿®å¤å’Œæ›´æ–° TODO

1. å¯¹æ¯” C ç‰ˆæœ¬ç¼–è¯‘å™¨çš„è¡Œä¸º
2. ç¡®ä¿è‡ªä¸¾ç¼–è¯‘å™¨è¡Œä¸ºä¸€è‡´
3. **âš ï¸ ç«‹å³æ›´æ–° TODO æ–‡ä»¶**ï¼š
   - å°†å¯¹åº”å‡½æ•°çš„æ£€æŸ¥æ¡†æ ‡è®°ä¸ºå®Œæˆï¼ˆ`[ ]` â†’ `[x]`ï¼‰
   - å¦‚æœæ•´ä¸ªæ–‡ä»¶å®Œæˆï¼Œæ›´æ–°æ–‡ä»¶çš„çŠ¶æ€æ ‡è®°
   - æ›´æ–°"ç¿»è¯‘è¿›åº¦è·Ÿè¸ª"éƒ¨åˆ†çš„è¿›åº¦
   - è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

---

## ğŸ“ ç¿»è¯‘æ£€æŸ¥æ¸…å•

### å¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥ï¼š

#### å‡½æ•°ç­¾å
- [ ] å‡½æ•°åæ˜¯å¦ä¸€è‡´
- [ ] å‚æ•°ç±»å‹æ˜¯å¦ä¸€è‡´
- [ ] å‚æ•°æ•°é‡æ˜¯å¦ä¸€è‡´
- [ ] è¿”å›å€¼ç±»å‹æ˜¯å¦ä¸€è‡´

#### é€»è¾‘æµç¨‹
- [ ] ä¸»è¦é€»è¾‘æµç¨‹æ˜¯å¦ä¸€è‡´
- [ ] æ¡ä»¶åˆ¤æ–­æ˜¯å¦ä¸€è‡´
- [ ] å¾ªç¯é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] é€’å½’è°ƒç”¨æ˜¯å¦ä¸€è‡´

#### é”™è¯¯å¤„ç†
- [ ] é”™è¯¯æ£€æŸ¥æ˜¯å¦ä¸€è‡´
- [ ] é”™è¯¯æŠ¥å‘Šæ˜¯å¦ä¸€è‡´
- [ ] æ”¾å®½æ£€æŸ¥çš„é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] é”™è¯¯è¿”å›æ˜¯å¦ä¸€è‡´

#### ç±»å‹ç³»ç»Ÿ
- [ ] ç±»å‹æ¨æ–­é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ç±»å‹æ¯”è¾ƒé€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ç±»å‹è½¬æ¢é€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ç±»å‹åˆ›å»ºé€»è¾‘æ˜¯å¦ä¸€è‡´

#### æ•°æ®ç»“æ„è®¿é—®
- [ ] ç»“æ„ä½“å­—æ®µè®¿é—®æ˜¯å¦æ­£ç¡®ï¼ˆC ç‰ˆæœ¬ `->` vs Uya ç‰ˆæœ¬ `.`ï¼‰
- [ ] æ•°ç»„è®¿é—®æ˜¯å¦æ­£ç¡®
- [ ] æŒ‡é’ˆè§£å¼•ç”¨æ˜¯å¦æ­£ç¡®ï¼ˆC ç‰ˆæœ¬ `*` vs Uya ç‰ˆæœ¬ç›´æ¥è®¿é—®ï¼‰
- [ ] **è”åˆä½“æ˜¯å¦å·²æ”¹ä¸ºç»“æ„ä½“**ï¼ˆâš ï¸ Uya æ²¡æœ‰è”åˆä½“ï¼Œå¿…é¡»å°† C ç‰ˆæœ¬çš„ `union` æ”¹ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µï¼‰
- [ ] **æšä¸¾è®¿é—®æ˜¯å¦æ­£ç¡®**ï¼ˆC ç‰ˆæœ¬ `enum_type->data.enum_type.field` â†’ Uya ç‰ˆæœ¬ `enum_type.field`ï¼‰
- [ ] **æŒ‡é’ˆè¿ç®—æ˜¯å¦å·²è½¬æ¢ä¸ºæ•°ç»„è®¿é—®**ï¼ˆC ç‰ˆæœ¬ `ptr + i` â†’ Uya ç‰ˆæœ¬ `&ptr[i]`ï¼‰
- [ ] **å‡½æ•°å®šä¹‰é¡ºåºæ˜¯å¦æ­£ç¡®**ï¼ˆUya ä¸æ”¯æŒå‰å‘å£°æ˜ï¼Œå‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨å‰å®šä¹‰ï¼‰

#### ç¬¦å·è¡¨å’Œå‡½æ•°è¡¨
- [ ] ç¬¦å·è¡¨æŸ¥æ‰¾æ˜¯å¦ä¸€è‡´
- [ ] ç¬¦å·è¡¨æ’å…¥æ˜¯å¦ä¸€è‡´
- [ ] å‡½æ•°è¡¨æŸ¥æ‰¾æ˜¯å¦ä¸€è‡´
- [ ] å‡½æ•°è¡¨æ’å…¥æ˜¯å¦ä¸€è‡´

#### ä½œç”¨åŸŸç®¡ç†
- [ ] è¿›å…¥ä½œç”¨åŸŸé€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] é€€å‡ºä½œç”¨åŸŸé€»è¾‘æ˜¯å¦ä¸€è‡´
- [ ] ä½œç”¨åŸŸçº§åˆ«ç®¡ç†æ˜¯å¦ä¸€è‡´

---

## ğŸ¯ ä¼˜å…ˆçº§è¯´æ˜

- **P0ï¼ˆæœ€é«˜ï¼‰**ï¼šæ ¸å¿ƒæ¨¡å—ï¼Œå¿…é¡»ä¼˜å…ˆç¿»è¯‘ï¼Œå½±å“ç¼–è¯‘å™¨çš„åŸºæœ¬åŠŸèƒ½
- **P1ï¼ˆé«˜ï¼‰**ï¼šé‡è¦æ¨¡å—ï¼Œå½±å“ä»£ç ç”ŸæˆåŠŸèƒ½
- **P2ï¼ˆä¸­ï¼‰**ï¼šè¾…åŠ©æ¨¡å—ï¼Œå½±å“è¾…åŠ©åŠŸèƒ½

---

## ğŸ“Š ç¿»è¯‘è¿›åº¦è·Ÿè¸ª

> **âš ï¸ é‡è¦æé†’ï¼š** æ¯å®Œæˆä¸€ä¸ªå‡½æ•°æˆ–æ–‡ä»¶çš„ç¿»è¯‘ï¼Œ**å¿…é¡»ç«‹å³æ›´æ–°**æœ¬éƒ¨åˆ†çš„æ£€æŸ¥æ¡†å’ŒçŠ¶æ€æ ‡è®°ï¼Œç¡®ä¿è¿›åº¦è·Ÿè¸ªå‡†ç¡®ã€‚ä¸è¦ç­‰åˆ°æ‰€æœ‰å·¥ä½œå®Œæˆåå†æ›´æ–°ã€‚

### æ ¸å¿ƒæ¨¡å—ï¼ˆP0ï¼‰

- [x] `checker.c` â†’ `checker.uya` - âœ… æ ¸å¿ƒæ¡†æ¶å·²å®Œæˆï¼ˆå·²å®Œæˆä¸»è¦å‡½æ•°ç¿»è¯‘ï¼Œå·²é€šè¿‡è¯­æ³•åˆ†æï¼Œçº¦1600è¡Œï¼‰
- [x] `parser.c` â†’ `parser.uya` - âœ… æ ¸å¿ƒæ¡†æ¶å·²å®Œæˆï¼ˆå·²å®Œæˆæ‰€æœ‰ä¸»è¦å‡½æ•°ç¿»è¯‘ï¼Œå·²é€šè¿‡è¯­æ³•åˆ†æï¼Œçº¦2800+è¡Œï¼‰
- [x] `lexer.c` â†’ `lexer.uya` - âœ… å·²å®Œæˆï¼ˆä» C è¦†ç›–å¼ç¿»è¯‘ï¼Œå·²é€šè¿‡è¯æ³•/è¯­æ³•/ç±»å‹æ£€æŸ¥ï¼‰
- [x] `ast.c` â†’ `ast.uya` - âœ… å·²å®Œæˆï¼ˆä» C è¦†ç›–å¼ç¿»è¯‘ï¼ŒASTNode æ‰å¹³åŒ–æ—  unionï¼‰
- [x] `arena.c` â†’ `arena.uya` - âœ… å·²å®Œæˆï¼ˆä» C è¦†ç›–å¼ç¿»è¯‘ï¼‰
- [x] `main.c` â†’ `main.uya` - âœ… å·²å®Œæˆï¼ˆä» C è¦†ç›–å¼ç¿»è¯‘ï¼Œä»… C99 åç«¯ï¼Œæ—  -exec é“¾æ¥ï¼‰

### LLVM C API ä»£ç ç”Ÿæˆæ¨¡å—ï¼ˆP1ï¼‰

- [ ] `codegen/llvm_capi/main.c` â†’ `codegen/llvm_capi/main.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/init.c` â†’ `codegen/llvm_capi/init.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/function.c` â†’ `codegen/llvm_capi/function.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/expr.c` â†’ `codegen/llvm_capi/expr.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/stmt.c` â†’ `codegen/llvm_capi/stmt.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/types.c` â†’ `codegen/llvm_capi/types.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/structs.c` â†’ `codegen/llvm_capi/structs.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/enums.c` â†’ `codegen/llvm_capi/enums.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/global.c` â†’ `codegen/llvm_capi/global.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/vars.c` â†’ `codegen/llvm_capi/vars.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/funcs.c` â†’ `codegen/llvm_capi/funcs.uya` - â³ å¾…ç¿»è¯‘
- [ ] `codegen/llvm_capi/utils.c` â†’ `codegen/llvm_capi/utils.uya` - â³ å¾…ç¿»è¯‘

### è¾…åŠ©æ¨¡å—ï¼ˆP2ï¼‰

- [ ] `str_utils.c` â†’ `str_utils.uya`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ - â³ å¾…ç¿»è¯‘

---

## ğŸ” å¸¸è§ç¿»è¯‘é—®é¢˜

### 1. è”åˆä½“æ”¹ä¸ºç»“æ„ä½“ï¼ˆé‡è¦ï¼‰

**é—®é¢˜ï¼š** **Uya æ²¡æœ‰è”åˆä½“ï¼ˆunionï¼‰**ï¼Œå¿…é¡»å°† C ç‰ˆæœ¬çš„ `union` æ”¹ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µ

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬ä½¿ç”¨ `union` æ¥å­˜å‚¨ä¸åŒç±»å‹çš„å­—æ®µï¼ˆåŒä¸€æ—¶é—´åªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªï¼‰
- Uya ç‰ˆæœ¬ä½¿ç”¨ç»“æ„ä½“åŒ…å«æ‰€æœ‰å­—æ®µï¼ˆæ‰€æœ‰å­—æ®µåŒæ—¶å­˜åœ¨ï¼‰

**ç¤ºä¾‹ï¼š**
```c
// C ç‰ˆæœ¬ï¼šä½¿ç”¨ union
typedef struct {
    TypeKind kind;
    union {
        struct { Type *element_type; } array;
        struct { const char *name; } enum_type;
        struct { const char *name; } struct_type;
    } data;
} Type;

// è®¿é—®æ–¹å¼
Type *type = ...;
Type *element_type = type->data.array.element_type;
```

```uya
// Uya ç‰ˆæœ¬ï¼šä½¿ç”¨ç»“æ„ä½“åŒ…å«æ‰€æœ‰å­—æ®µ
struct Type {
    kind: TypeKind,
    element_type: &Type,      // æ•°ç»„ç±»å‹ä½¿ç”¨
    enum_type_name: &byte,     // æšä¸¾ç±»å‹ä½¿ç”¨
    struct_type_name: &byte,   // ç»“æ„ä½“ç±»å‹ä½¿ç”¨
}

// è®¿é—®æ–¹å¼
const type: Type = ...;
const element_type: &Type = type.element_type;  // ç›´æ¥è®¿é—®å­—æ®µ
```

**æ³¨æ„äº‹é¡¹ï¼š**
- æ‰€æœ‰ union å­—æ®µéƒ½å¿…é¡»è½¬æ¢ä¸ºç»“æ„ä½“çš„ç‹¬ç«‹å­—æ®µ
- è®¿é—®æ—¶ç›´æ¥ä½¿ç”¨å­—æ®µåï¼Œä¸éœ€è¦é€šè¿‡ `data` ä¸­é—´å±‚
- è™½ç„¶æ‰€æœ‰å­—æ®µéƒ½å­˜åœ¨ï¼Œä½†åœ¨ä½¿ç”¨æ—¶åº”è¯¥æ ¹æ® `kind` å­—æ®µåˆ¤æ–­ä½¿ç”¨å“ªä¸ªå­—æ®µ

### 2. æŒ‡é’ˆè®¿é—®å·®å¼‚

**é—®é¢˜ï¼š** C ç‰ˆæœ¬ä½¿ç”¨ `->` è®¿é—®æŒ‡é’ˆæˆå‘˜ï¼ŒUya ç‰ˆæœ¬ä½¿ç”¨ `.` è®¿é—®

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬ï¼š`node->data.var_decl.name`
- Uya ç‰ˆæœ¬ï¼š`node.var_decl_name`ï¼ˆç›´æ¥è®¿é—®å­—æ®µï¼‰

### 3. æŒ‡é’ˆè§£å¼•ç”¨å·®å¼‚

**é—®é¢˜ï¼š** C ç‰ˆæœ¬ä½¿ç”¨ `*` è§£å¼•ç”¨ï¼ŒUya ç‰ˆæœ¬ç›´æ¥è®¿é—®

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬ï¼š`*array_type.data.array.element_type`
- Uya ç‰ˆæœ¬ï¼š`array_type.element_type[0]`ï¼ˆæ•°ç»„è®¿é—®ï¼‰

### 4. æŒ‡é’ˆè¿ç®—å·®å¼‚ï¼ˆé‡è¦ï¼‰

**é—®é¢˜ï¼š** Uya Mini **ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—**ï¼ˆå¦‚ `ptr + i`ã€`ptr++` ç­‰ï¼‰ï¼Œå¿…é¡»è½¬æ¢ä¸ºæ•°ç»„è®¿é—®å½¢å¼

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬æŒ‡é’ˆè¿ç®—ï¼š`ptr + i` â†’ Uya ç‰ˆæœ¬ï¼š`&ptr[i]`
- C ç‰ˆæœ¬ï¼š`*(ptr + i)` â†’ Uya ç‰ˆæœ¬ï¼š`ptr[i]`
- C ç‰ˆæœ¬ï¼š`ptr++` â†’ Uya ç‰ˆæœ¬ï¼šéœ€è¦é‡æ„ä¸ºæ•°ç»„è®¿é—®æˆ–ä½¿ç”¨ç´¢å¼•å˜é‡
- C ç‰ˆæœ¬ï¼š`ptr[i]` â†’ Uya ç‰ˆæœ¬ï¼š`ptr[i]`ï¼ˆä¿æŒä¸å˜ï¼‰

**ç¤ºä¾‹ï¼š**
```c
// C ç‰ˆæœ¬
Type *element_type_ptr = (Type *)arena_alloc(...);
element_type_ptr[0] = element_type;  // æˆ– *element_type_ptr = element_type
```

```uya
// Uya ç‰ˆæœ¬
const element_type_ptr: &Type = arena_alloc(...) as &Type;
element_type_ptr[0] = element_type;  // å¿…é¡»ä½¿ç”¨æ•°ç»„è®¿é—®
```

**æ³¨æ„ï¼š**
- æ‰€æœ‰æŒ‡é’ˆè¿ç®—éƒ½å¿…é¡»è½¬æ¢ä¸ºæ•°ç»„è®¿é—®
- æŒ‡é’ˆå¢é‡/å‡é‡æ“ä½œéœ€è¦é‡æ„ä¸ºç´¢å¼•å˜é‡
- æŒ‡é’ˆæ¯”è¾ƒï¼ˆå¦‚ `ptr1 < ptr2`ï¼‰éœ€è¦è½¬æ¢ä¸ºç´¢å¼•æ¯”è¾ƒ

### 5. å‡½æ•°å‰å‘å£°æ˜é™åˆ¶ï¼ˆé‡è¦ï¼‰

**é—®é¢˜ï¼š** Uya Mini **ä¸æ”¯æŒæ™®é€šå‡½æ•°çš„å‰å‘å£°æ˜**ï¼Œå‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨å‰å®šä¹‰

**è§£å†³æ–¹æ¡ˆï¼š**
- **é‡æ–°ç»„ç»‡å‡½æ•°é¡ºåº**ï¼šå°†å‡½æ•°å®šä¹‰æ”¾åœ¨ä½¿ç”¨ä¹‹å‰
- **ä½¿ç”¨å‡½æ•°è¡¨**ï¼šå¯¹äºéœ€è¦ç›¸äº’è°ƒç”¨çš„å‡½æ•°ï¼Œä½¿ç”¨å‡½æ•°è¡¨æœºåˆ¶ï¼ˆå¦‚ `checker_register_fn_decl`ï¼‰
- **ä¸¤éæ£€æŸ¥**ï¼šç¬¬ä¸€éæ³¨å†Œå‡½æ•°ç­¾åï¼Œç¬¬äºŒéæ£€æŸ¥å‡½æ•°ä½“ï¼ˆå¦‚ç±»å‹æ£€æŸ¥å™¨çš„å®ç°ï¼‰

**ç¤ºä¾‹ï¼š**
```c
// C ç‰ˆæœ¬ï¼šå¯ä»¥ä½¿ç”¨å‰å‘å£°æ˜
static void function_b();
static void function_a() {
    function_b();  // è°ƒç”¨åå®šä¹‰çš„å‡½æ•°
}
static void function_b() {
    // ...
}
```

```uya
// Uya ç‰ˆæœ¬ï¼šå¿…é¡»é‡æ–°ç»„ç»‡é¡ºåº
fn function_b() void {
    // ...
}

fn function_a() void {
    function_b();  // ç°åœ¨ function_b å·²ç»å®šä¹‰
}
```

**å¯¹äºç±»å‹æ£€æŸ¥å™¨ç­‰éœ€è¦ç›¸äº’è°ƒç”¨çš„å‡½æ•°ï¼š**
- ä½¿ç”¨ä¸¤éæ£€æŸ¥æœºåˆ¶ï¼šç¬¬ä¸€éæ³¨å†Œå‡½æ•°ç­¾åï¼Œç¬¬äºŒéæ£€æŸ¥å‡½æ•°ä½“
- å‚è€ƒ `checker_check` å‡½æ•°çš„å®ç°æ–¹å¼

### 6. æšä¸¾è®¿é—®å·®å¼‚

**é—®é¢˜ï¼š** C ç‰ˆæœ¬ä½¿ç”¨ union åµŒå¥—è®¿é—®æšä¸¾å­—æ®µï¼ŒUya ç‰ˆæœ¬ç›´æ¥è®¿é—®å­—æ®µ

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬ï¼š`enum_type->data.enum_type.field_name` æˆ– `enum_type.data.enum_type.field_name`
- Uya ç‰ˆæœ¬ï¼š`enum_type.field_name`ï¼ˆç›´æ¥è®¿é—®å­—æ®µï¼‰

**ç¤ºä¾‹ï¼š**
```c
// C ç‰ˆæœ¬
Type *enum_type = ...;
const char *field_name = enum_type->data.enum_type.field_name;
```

```uya
// Uya ç‰ˆæœ¬
const enum_type: Type = ...;
const field_name: &byte = enum_type.field_name;  // ç›´æ¥è®¿é—®å­—æ®µ
```

### 7. å­—ç¬¦ä¸²å¤„ç†å·®å¼‚

**é—®é¢˜ï¼š** C ç‰ˆæœ¬ä½¿ç”¨ `const char *`ï¼ŒUya ç‰ˆæœ¬ä½¿ç”¨ `&byte`

**è§£å†³æ–¹æ¡ˆï¼š**
- C ç‰ˆæœ¬ï¼š`const char *name`
- Uya ç‰ˆæœ¬ï¼š`name: &byte`

### 8. é”™è¯¯å¤„ç†å·®å¼‚

**é—®é¢˜ï¼š** C ç‰ˆæœ¬å¯èƒ½ä½¿ç”¨ä¸åŒçš„é”™è¯¯å¤„ç†æ–¹å¼

**è§£å†³æ–¹æ¡ˆï¼š**
- ä¿æŒé”™è¯¯å¤„ç†é€»è¾‘å®Œå…¨ä¸€è‡´
- ä¿æŒæ”¾å®½æ£€æŸ¥çš„é€»è¾‘å®Œå…¨ä¸€è‡´

---

## ğŸ“Œ é‡è¦æ–‡ä»¶è·¯å¾„

### æºä»£ç æ–‡ä»¶
- **C ç‰ˆæœ¬æºä»£ç ï¼š** `compiler-mini/src/`
- **è‡ªä¸¾ç‰ˆæœ¬æºä»£ç ï¼š** `compiler-mini/uya-src/`
- **è¯­æ³•è§„èŒƒï¼š** `compiler-mini/spec/UYA_MINI_SPEC.md`

### æ„å»ºå’Œæµ‹è¯•
- **è‡ªä¸¾ç¼–è¯‘å™¨æ„å»ºè„šæœ¬ï¼š** `compiler-mini/uya-src/compile.sh`
- **æµ‹è¯•è„šæœ¬ï¼š** `compiler-mini/tests/run_programs.sh`
- **æµ‹è¯•ç”¨ä¾‹ç›®å½•ï¼š** `compiler-mini/tests/programs/`
- **è‡ªä¸¾ç¼–è¯‘å™¨å¯æ‰§è¡Œæ–‡ä»¶ï¼š** `compiler-mini/build/uya-compiler/compiler`

### å·¥ä½œç›®å½•
- **é¡¹ç›®æ ¹ç›®å½•ï¼š** `/media/winger/_dde_home/winger/uya/compiler-mini`
- **è‡ªä¸¾ç¼–è¯‘å™¨æºä»£ç ï¼š** `/media/winger/_dde_home/winger/uya/compiler-mini/uya-src`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

> **âš ï¸ æ ¸å¿ƒåŸåˆ™ï¼šé‡æ–°è¦†ç›–å¼ç¿»è¯‘**

1. **é‡æ–°è¦†ç›–å¼ç¿»è¯‘åŸåˆ™**ï¼š
   - **ä¸è¦å‚è€ƒç°æœ‰ Uya ç‰ˆæœ¬çš„å®ç°**ï¼šå®Œå…¨å¿½ç•¥ `uya-src/` ç›®å½•ä¸‹çš„ç°æœ‰ä»£ç 
   - **å®Œå…¨ä»¥ C ç‰ˆæœ¬ä¸ºå”¯ä¸€å‚è€ƒ**ï¼šä»¥ `src/` ç›®å½•ä¸‹çš„ C ä»£ç ä¸ºå”¯ä¸€æ ‡å‡†
   - **ä»å¤´å¼€å§‹ç¿»è¯‘**ï¼šä¸è¦åŸºäºç°æœ‰ä»£ç ä¿®æ”¹ï¼Œè€Œæ˜¯å®Œå…¨é‡æ–°ç¿»è¯‘
   - **è¦†ç›–å¼æ›¿æ¢**ï¼šç¿»è¯‘å®Œæˆåï¼Œå®Œå…¨è¦†ç›–ç°æœ‰çš„ Uya ç‰ˆæœ¬æ–‡ä»¶

2. **å§‹ç»ˆå‚è€ƒè¯­æ³•è§„èŒƒï¼š** åœ¨ç¿»è¯‘ä»»ä½•ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¡®è®¤è¯­æ³•è§„èŒƒä¸­çš„è§„åˆ™

3. **ä¿æŒä¸ C ç‰ˆæœ¬ä¸€è‡´ï¼š** æ‰€æœ‰é€»è¾‘éƒ½åº”è¯¥ä¸ C ç‰ˆæœ¬å®Œå…¨ä¸€è‡´

4. **æµ‹è¯•é©±åŠ¨ç¿»è¯‘ï¼š** æ¯æ¬¡ç¿»è¯‘åéƒ½è¦è¿è¡Œæµ‹è¯•éªŒè¯

5. **è®°å½•ç¿»è¯‘å†…å®¹ï¼š** åœ¨ä»£ç ä¸­æ·»åŠ æ³¨é‡Šè¯´æ˜ç¿»è¯‘çš„è¦ç‚¹

6. **âš ï¸ è”åˆä½“é™åˆ¶ï¼š** Uya æ²¡æœ‰è”åˆä½“ï¼ˆunionï¼‰ï¼Œå¿…é¡»å°† C ç‰ˆæœ¬çš„ `union` æ”¹ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µã€‚æ‰€æœ‰ union å­—æ®µéƒ½å¿…é¡»è½¬æ¢ä¸ºç»“æ„ä½“çš„ç‹¬ç«‹å­—æ®µã€‚

7. **âš ï¸ æšä¸¾è®¿é—®é™åˆ¶ï¼š** æšä¸¾è¦ç”¨ `enum_type.field` å½¢å¼è®¿é—®ï¼Œä¸èƒ½ä½¿ç”¨ C ç‰ˆæœ¬çš„ union åµŒå¥—è®¿é—®æ–¹å¼

8. **âš ï¸ æŒ‡é’ˆè¿ç®—é™åˆ¶ï¼š** Uya Mini ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ï¼Œæ‰€æœ‰ `ptr + i` å¿…é¡»è½¬æ¢ä¸º `&ptr[i]`

9. **âš ï¸ å‡½æ•°å‰å‘å£°æ˜é™åˆ¶ï¼š** Uya Mini ä¸æ”¯æŒå‡½æ•°å‰å‘å£°æ˜ï¼Œå¿…é¡»é‡æ–°ç»„ç»‡å‡½æ•°é¡ºåºæˆ–ä½¿ç”¨å‡½æ•°è¡¨æœºåˆ¶

10. **âš ï¸ åŠæ—¶æ›´æ–° TODOï¼š** æ¯å®Œæˆä¸€ä¸ªå‡½æ•°æˆ–æ–‡ä»¶çš„ç¿»è¯‘ï¼Œç«‹å³æ›´æ–°æœ¬æ–‡æ¡£ä¸­çš„æ£€æŸ¥æ¡†å’ŒçŠ¶æ€æ ‡è®°ï¼Œä¸è¦ç­‰åˆ°æ‰€æœ‰å·¥ä½œå®Œæˆåå†æ›´æ–°

---

## ğŸ“š ç¿»è¯‘é—®é¢˜è®°å½•

> **è¯¦ç»†çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆè®°å½•åœ¨ï¼š** `compiler-mini/TRANSLATION_ISSUES_checker.md`

è¯¥æ–‡æ¡£è®°å½•äº†ç¿»è¯‘ `checker.c` è¿‡ç¨‹ä¸­é‡åˆ°çš„ 10 ä¸ªä¸»è¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ï¼š
- å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°ç¼ºå¤±
- ä½è¿ç®—ç¬¦é™åˆ¶
- æŒ‡é’ˆè§£å¼•ç”¨è®¿é—®
- ä¸‰å…ƒè¡¨è¾¾å¼é™åˆ¶
- å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è½¬æ¢
- å˜é‡åˆå§‹åŒ–è¦æ±‚
- å¾ªç¯ä¸­çš„ continue è¯­å¥
- ASTNode å­—æ®µè®¿é—®çš„ç‰¹æ®Šå¤„ç†
- å‡½æ•°è°ƒç”¨æ—¶çš„ç±»å‹æ£€æŸ¥
- èµ‹å€¼è¡¨è¾¾å¼çš„ç±»å‹æ£€æŸ¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

**2025-01-29ï¼š** å®Œæˆ `main.c` â†’ `main.uya` çš„è¦†ç›–å¼ç¿»è¯‘
- âœ… æ–°å»º `main.uya`ï¼šuya_mainã€read_file_contentã€print_usageã€parse_argsã€compile_filesï¼›ä»…å®ç° C99 åç«¯ï¼Œæœªå®ç° LLVM åç«¯ä¸ -exec é“¾æ¥
- âœ… æ–°å»º `extern_decls.uya`ï¼šget_argcã€get_argvã€get_stderrã€fopenã€freadã€fcloseã€fgetcã€fputsã€fprintfã€strlenã€strcmpã€strrchrã€strncpyã€snprintfã€sprintfã€memcpyã€memset
- âœ… æ–°å»º `str_utils.uya`ï¼šå ä½æ–‡ä»¶ï¼ˆä¾› compile.sh å¼•ç”¨ï¼‰
- âœ… è‡ªä¸¾ç¼–è¯‘é€šè¿‡ï¼š`./compile.sh --c99` æˆåŠŸç”Ÿæˆ compiler.c

**2025-01-29ï¼š** å®Œæˆ `ast.c` çš„è¦†ç›–å¼ç¿»è¯‘
- âœ… æ–°å»º `ast.uya`ï¼ˆä» src/ast.c + ast.hï¼‰ï¼šEnumVariantã€ASTNodeTypeã€ASTNodeï¼ˆunion æ‰å¹³åŒ–ä¸ºç‹¬ç«‹å­—æ®µï¼‰ã€ast_new_nodeã€ast_merge_programs
- âœ… ast_merge_programs å‚æ•°æ”¹ä¸º `[&ASTNode: MAX_MERGE_PROGRAMS]`ï¼ˆUya æ—  ASTNode** æŒ‡é’ˆæ•°ç»„ï¼‰

**2025-01-29ï¼š** å®Œæˆ `lexer.c`ã€`arena.c` çš„è¦†ç›–å¼ç¿»è¯‘
- âœ… æ–°å»º `arena.uya`ï¼ˆä» src/arena.c ç¿»è¯‘ï¼‰ï¼šarena_initã€arena_allocã€arena_resetã€align_size
- âœ… æ–°å»º `lexer.uya`ï¼ˆä» src/lexer.c ç¿»è¯‘ï¼‰ï¼šTokenType/Token/Lexerã€lexer_initã€lexer_next_tokenã€read_string/read_number/read_identifier_or_keyword åŠè¾…åŠ©å‡½æ•°
- âœ… é€šè¿‡è¯æ³•ã€è¯­æ³•ã€ç±»å‹æ£€æŸ¥é˜¶æ®µï¼›å®Œæ•´é“¾æ¥éœ€ ast.uyaã€main.uya ç­‰
- âœ… ä¿®å¤ï¼šé¿å…å…³é”®å­— `len` ä½œä¸ºå˜é‡åï¼›byte è¿”å›ç”¨ `0 as byte`ï¼›is_keyword ç”¨å•å˜é‡+else if ä¿è¯è¿”å›ç±»å‹

**2024-01-29ï¼š** å®Œæˆ `checker.c` çš„ç¿»è¯‘
- âœ… ç¿»è¯‘äº† 10 ä¸ªå¾…å®Œæˆçš„ç±»å‹æ£€æŸ¥å‡½æ•°
- âœ… æ‰€æœ‰å‡½æ•°éƒ½å·²é›†æˆåˆ° `checker_check_node()` ä¸­
- âœ… é€šè¿‡äº†ç¼–è¯‘éªŒè¯å’Œå‡½æ•°éªŒè¯
- âœ… è®°å½•äº†ç¿»è¯‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

**2024-01-XXï¼š** åˆ›å»ºåˆå§‹ç¿»è¯‘ TODO æ–‡æ¡£
- åˆ—å‡ºäº†æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„æ–‡ä»¶
- æä¾›äº†è¯¦ç»†çš„å·¥ä½œæµç¨‹å’Œæ£€æŸ¥æ¸…å•
- è®°å½•äº†å¸¸è§ç¿»è¯‘é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

**æç¤ºï¼š** 
- **âš ï¸ æ¯æ¬¡ç¿»è¯‘å®Œæˆåï¼Œå¿…é¡»ç«‹å³æ›´æ–°æœ¬æ–‡æ¡£çš„"ç¿»è¯‘è¿›åº¦è·Ÿè¸ª"éƒ¨åˆ†**ï¼Œå°†å¯¹åº”å‡½æ•°çš„æ£€æŸ¥æ¡†æ ‡è®°ä¸ºå®Œæˆï¼ˆ`[ ]` â†’ `[x]`ï¼‰ï¼Œå¹¶æ›´æ–°æ–‡ä»¶çŠ¶æ€ã€‚
- å»ºè®®è®°å½•å®ŒæˆçŠ¶æ€å’Œé‡åˆ°çš„é—®é¢˜ï¼Œä¾¿äºåç»­å‚è€ƒå’Œé—®é¢˜è¿½è¸ªã€‚
- ä¸è¦ç­‰åˆ°æ‰€æœ‰å·¥ä½œå®Œæˆåå†æ›´æ–°ï¼Œåº”è¯¥æ¯å®Œæˆä¸€ä¸ªå‡½æ•°å°±ç«‹å³æ›´æ–°ã€‚

