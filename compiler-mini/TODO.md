# Uya Mini 编译器实现待办事项

本文档是待办事项的主索引，详细任务按阶段拆分为独立文件。

## 代码质量约束（严格执行）

- ✅ 所有代码必须使用**中文注释**
- ✅ **每个函数不超过 200 行**（严格限制）
- ✅ **每个源文件不超过 1500 行**（严格限制）
- ✅ 禁止使用堆分配（不能使用 `malloc`、`calloc`、`realloc`、`free`）
- ✅ 使用 Arena 分配器管理内存
- ✅ 使用 C99 标准
- ✅ 使用 LLVM C API 生成二进制代码
- ✅ **必须遵循 TDD（测试驱动开发）流程**
- ✅ **功能必须完整实现，不能简化，不能偷懒**

## TDD 开发流程（强制要求）

每个功能实现必须遵循以下流程：

1. **Red（红）**：先编写测试用例，运行测试确保失败
2. **Green（绿）**：实现最小代码使测试通过
3. **Refactor（重构）**：重构优化代码，保持测试通过

**重要原则**：
- 不能跳过测试步骤
- 不能简化功能实现
- 可以分部实现（多次会话完成一个模块）

## 重要参考文档

- `spec/UYA_MINI_SPEC.md` - **Uya Mini 语言规范（必须参考）**
- `../uya.md` - Uya 语言完整规范
- `../uya_ai_prompt.md` - Uya 语言 AI 提示词
- `../compiler/architecture.md` - Uya 编译器架构设计

---

## 阶段索引

- [阶段1：项目初始化](TODO_phase1.md) ✅
- [阶段2：实现 Arena 分配器](TODO_phase2.md) ✅
- [阶段3：实现 AST 数据结构](TODO_phase3.md) ⏭️ 待开始
- [阶段4：实现词法分析器（Lexer）](TODO_phase4.md) ⏭️ 待开始
- [阶段5：实现语法分析器（Parser）](TODO_phase5.md) ⏭️ 待开始
- [阶段6：实现类型检查器（Checker）](TODO_phase6.md) ⏭️ 待开始
- [阶段7：实现代码生成器（CodeGen）](TODO_phase7.md) ⏭️ 待开始
- [阶段8：实现主程序（Main）](TODO_phase8.md) ⏭️ 待开始
- [阶段9：测试和验证](TODO_phase9.md) ⏭️ 待开始
- [阶段10：将 C99 编译器翻译成 Uya](TODO_phase10.md) ⏭️ 未来计划

---

## 技术要点总结

1. **TDD 驱动**：所有功能必须遵循 TDD 流程（Red-Green-Refactor）
2. **完整实现**：不能简化功能，不能偷懒，必须完整实现
3. **分部实现**：可以分多次会话完成一个模块，但必须完整实现
4. **代码质量**：函数 < 200 行，文件 < 1500 行（严格限制）
5. **无堆分配**：所有数据结构使用固定大小数组，通过 Arena 分配器管理
6. **中文注释**：所有代码必须使用中文注释
7. **结构体支持**：Uya Mini 包含结构体支持，编译器内部可以使用结构体
8. **LLVM C API**：使用 LLVM C API 直接从 AST 生成二进制
9. **参考规范**：实现前必须参考 `spec/UYA_MINI_SPEC.md`
