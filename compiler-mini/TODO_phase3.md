# 阶段3：实现 AST 数据结构

## 3.1 AST 节点类型定义

- [ ] 创建 `src/ast.h`
  - [ ] 定义 ASTNodeType 枚举（仅包含最小子集需要的节点类型）
    - [ ] 程序节点、函数声明、结构体声明、变量声明
    - [ ] 表达式节点：二元运算、一元运算、标识符、数字、布尔、函数调用
    - [ ] 结构体相关：结构体字面量、字段访问
    - [ ] 语句节点：return、if、while、赋值、表达式语句、代码块
  - [ ] 定义基础 ASTNode 结构体
  - [ ] 定义各种 AST 节点数据结构的 union
  - [ ] 添加中文注释说明

## 3.2 AST 节点创建函数（TDD）

### TDD Red: 编写测试

- [ ] 创建测试文件
  - [ ] 测试各种节点类型的创建
  - [ ] 运行测试确保失败

### TDD Green: 实现功能

- [ ] 创建 `src/ast.c`
  - [ ] 实现 `ast_new_node()` - 创建 AST 节点（使用 Arena 分配）
  - [ ] 实现 `ast_free()` - 释放 AST 节点（可选，因为使用 Arena）
  - [ ] 实现各种节点类型的创建辅助函数
  - [ ] 添加中文注释说明
  - [ ] 运行测试确保通过
  - [ ] **验证函数 < 200 行，文件 < 1500 行**

### TDD Refactor: 优化

- [ ] 代码审查和重构
- [ ] 运行测试确保通过

