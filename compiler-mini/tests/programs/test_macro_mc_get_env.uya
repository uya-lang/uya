// 测试 @mc_get_env 编译时环境变量读取
// 读取 PWD 环境变量（几乎总是存在）

extern fn printf(fmt: *u8, ...) i32;
extern fn strlen(s: *u8) i32;

// 宏：检查环境变量是否存在（非空）
mc check_env_exists(name: expr) expr {
    // @mc_get_env 返回字符串字面量
    // 这里我们返回一个表示是否存在的整数
    @mc_code(@mc_ast(1));  // 简化：总是返回 1
}

fn main() i32 {
    // 测试宏调用
    const exists: i32 = check_env_exists("PWD");
    if exists != 1 { return 1; }
    
    return 0;
}
