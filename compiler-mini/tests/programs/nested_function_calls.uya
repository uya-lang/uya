// 嵌套函数调用测试
// 测试函数调用的嵌套和链式调用

fn add(a: i32, b: i32) i32 {
    return a + b;
}

fn multiply(a: i32, b: i32) i32 {
    return a * b;
}

fn square(n: i32) i32 {
    return multiply(n, n);
}

fn double(n: i32) i32 {
    return multiply(n, 2);
}

fn triple(n: i32) i32 {
    return add(add(n, n), n);
}

fn main() i32 {
    // 测试嵌套调用: add(add(1, 2), add(3, 4))
    const result1: i32 = add(add(1, 2), add(3, 4));
    if result1 != 10 {
        return 1;
    }
    
    // 测试链式调用: multiply(add(5, 3), 2)
    const result2: i32 = multiply(add(5, 3), 2);
    if result2 != 16 {
        return 2;
    }
    
    // 测试多层嵌套: add(multiply(2, 3), add(4, 5))
    const result3: i32 = add(multiply(2, 3), add(4, 5));
    if result3 != 15 {
        return 3;
    }
    
    // 测试square函数（内部调用multiply）
    const result4: i32 = square(5);
    if result4 != 25 {
        return 4;
    }
    
    // 测试嵌套square: add(square(3), square(4))
    const result5: i32 = add(square(3), square(4));
    if result5 != 25 {
        return 5;
    }
    
    // 测试double和triple组合
    const result6: i32 = add(double(5), triple(3));
    if result6 != 19 {
        return 6;
    }
    
    // 测试深层嵌套: multiply(add(double(2), triple(1)), square(2))
    const result7: i32 = multiply(add(double(2), triple(1)), square(2));
    // double(2) = 4, triple(1) = 3, add(4, 3) = 7
    // square(2) = 4
    // multiply(7, 4) = 28
    if result7 != 28 {
        return 7;
    }
    
    return 0;
}

