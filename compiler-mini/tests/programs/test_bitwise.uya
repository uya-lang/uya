// 位运算符测试：& | ^ ~ << >>
// 返回 0 表示通过

fn test_bit_and() i32 {
    const a: i32 = 240;
    const b: i32 = 15;
    if ((a & b) != 0) {
        return 1;
    }
    if ((a & a) != 240) {
        return 2;
    }
    return 0;
}

fn test_bit_or() i32 {
    const a: i32 = 240;
    const b: i32 = 15;
    if ((a | b) != 255) {
        return 1;
    }
    return 0;
}

fn test_bit_xor() i32 {
    const a: i32 = 255;
    const b: i32 = 240;
    if ((a ^ b) != 15) {
        return 1;
    }
    if ((a ^ a) != 0) {
        return 2;
    }
    return 0;
}

fn test_bit_not() i32 {
    const a: i32 = 0;
    if ((~a) != -1) {
        return 1;
    }
    const b: i32 = -1;
    if ((~b) != 0) {
        return 2;
    }
    const c: i32 = 305419896;
    if ((~c) != -305419897) {
        return 3;
    }
    return 0;
}

fn test_shift_left() i32 {
    const a: i32 = 1;
    if ((a << 0) != 1) {
        return 1;
    }
    if ((a << 4) != 16) {
        return 2;
    }
    const b: i32 = 2147483647;
    if ((b << 1) != -2) {
        return 3;
    }
    return 0;
}

fn test_shift_right() i32 {
    const a: i32 = 16;
    if ((a >> 4) != 1) {
        return 1;
    }
    const b: i32 = -1;
    if ((b >> 8) != -1) {
        return 2;
    }
    const c: i32 = -16;
    if ((c >> 2) != -4) {
        return 3;
    }
    return 0;
}

fn test_precedence() i32 {
    // 1 | 2 & 4 = 1 | (2 & 4) = 1 | 0 = 1
    if ((1 | 2 & 4) != 1) {
        return 1;
    }
    // (1 | 2) & 4 = 3 & 4 = 0
    const a: i32 = (1 | 2) & 4;
    if (a != 0) {
        return 2;
    }
    // 1 << 2 + 1 = 1 << 3 = 8（+ 优先于 <<）
    if ((1 << 2 + 1) != 8) {
        return 3;
    }
    return 0;
}

fn main() i32 {
    if (test_bit_and() != 0) {
        return 10;
    }
    if (test_bit_or() != 0) {
        return 20;
    }
    if (test_bit_xor() != 0) {
        return 30;
    }
    if (test_bit_not() != 0) {
        return 40;
    }
    if (test_shift_left() != 0) {
        return 50;
    }
    if (test_shift_right() != 0) {
        return 60;
    }
    if (test_precedence() != 0) {
        return 70;
    }
    return 0;
}
