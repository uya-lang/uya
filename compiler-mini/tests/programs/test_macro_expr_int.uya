// 测试宏：返回整数表达式
// 测试各种整数字面量和表达式

// 返回正整数
mc positive_int() expr {
    @mc_code(@mc_ast(42));
}

// 返回零
mc zero() expr {
    @mc_code(@mc_ast(0));
}

// 返回负整数
mc negative_int() expr {
    @mc_code(@mc_ast(-100));
}

// 返回算术表达式
mc arithmetic_expr() expr {
    @mc_code(@mc_ast(10 + 20 * 3));
}

// 返回带括号的表达式
mc paren_expr() expr {
    @mc_code(@mc_ast((10 + 20) * 3));
}

// 返回位运算表达式
mc bitwise_expr() expr {
    @mc_code(@mc_ast(255 & 15));
}

// 返回最大 i32 值
mc max_i32() expr {
    @mc_code(@mc_ast(2147483647));
}

// 返回一个大的负数
mc large_negative() expr {
    @mc_code(@mc_ast(-1000000));
}

fn main() i32 {
    // 测试正整数
    const v1: i32 = positive_int();
    if v1 != 42 { return 1; }
    
    // 测试零
    const v2: i32 = zero();
    if v2 != 0 { return 2; }
    
    // 测试负整数
    const v3: i32 = negative_int();
    if v3 != -100 { return 3; }
    
    // 测试算术表达式 10 + 20 * 3 = 10 + 60 = 70
    const v4: i32 = arithmetic_expr();
    if v4 != 70 { return 4; }
    
    // 测试带括号的表达式 (10 + 20) * 3 = 30 * 3 = 90
    const v5: i32 = paren_expr();
    if v5 != 90 { return 5; }
    
    // 测试位运算 0xFF & 0x0F = 15
    const v6: i32 = bitwise_expr();
    if v6 != 15 { return 6; }
    
    // 测试最大 i32
    const v7: i32 = max_i32();
    if v7 != 2147483647 { return 7; }
    
    // 测试大负数
    const v8: i32 = large_negative();
    if v8 != -1000000 { return 8; }
    
    return 0;
}

