// 测试泛型函数 - 返回泛型结构体

// 泛型结构体
struct Result<T> {
    value: T,
    ok: bool,
}

// 泛型函数：创建成功的 Result
fn ok<T>(value: T) Result<T> {
    return Result<T>{ value: value, ok: true };
}

// 泛型函数：创建失败的 Result（使用默认值）
fn err<T>(default_value: T) Result<T> {
    return Result<T>{ value: default_value, ok: false };
}

fn main() i32 {
    // 测试 ok<i32>
    const r1: Result<i32> = ok<i32>(42);
    if r1.value != 42 {
        return 1;
    }
    if r1.ok != true {
        return 2;
    }
    
    // 测试 err<i32>
    const r2: Result<i32> = err<i32>(0);
    if r2.value != 0 {
        return 3;
    }
    if r2.ok != false {
        return 4;
    }
    
    // 测试 ok<bool>
    const r3: Result<bool> = ok<bool>(true);
    if r3.value != true {
        return 5;
    }
    
    return 0;
}

