// 运算符优先级完整测试程序
// 测试所有运算符的优先级和结合性
// 优先级从高到低：一元运算符 > 类型转换 > 乘除模 > 加减 > 比较 > 相等性 > 逻辑与 > 逻辑或 > 赋值

fn main() i32 {
    // ========== 测试1：一元运算符优先级 ==========
    
    // 1.1 一元运算符优先级高于二元运算符
    var x: i32 = 5;
    var result1: i32 = -x * 2;
    if result1 != -10 {
        return 1;  // -5 * 2 = -10（不是 -(5*2) = -10）
    }
    
    var bool_val: bool = false;
    var result2: bool = !bool_val && true;
    if result2 != true {
        return 2;  // !false && true = true && true = true
    }
    
    // ========== 测试2：类型转换优先级 ==========
    
    // 2.1 类型转换优先级高于乘除运算
    var i32_val: i32 = 10;
    var byte_val: byte = 2;
    // (i32_val as byte) * byte_val 应该先转换再乘法
    var result3: i32 = (i32_val as byte) as i32 * (byte_val as i32);
    if result3 != 20 {
        return 3;  // 10 as byte = 10, 10 * 2 = 20
    }
    
    // ========== 测试3：乘除模运算符优先级 ==========
    
    // 3.1 乘除模优先级高于加减
    var result4: i32 = 2 + 3 * 4;
    if result4 != 14 {
        return 4;  // 2 + 3 * 4 = 2 + 12 = 14（不是 5 * 4 = 20）
    }
    
    var result5: i32 = 10 - 8 / 2;
    if result5 != 6 {
        return 5;  // 10 - 8 / 2 = 10 - 4 = 6（不是 2 / 2 = 1）
    }
    
    var result6: i32 = 10 + 15 % 4;
    if result6 != 13 {
        return 6;  // 10 + 15 % 4 = 10 + 3 = 13（不是 25 % 4 = 1）
    }
    
    // 3.2 乘除模左结合
    var result7: i32 = 24 / 4 / 2;
    if result7 != 3 {
        return 7;  // 24 / 4 / 2 = 6 / 2 = 3（不是 24 / 2 = 12）
    }
    
    var result8: i32 = 2 * 3 * 4;
    if result8 != 24 {
        return 8;  // 2 * 3 * 4 = 6 * 4 = 24
    }
    
    // ========== 测试4：加减运算符优先级 ==========
    
    // 4.1 加减优先级低于乘除
    var result9: i32 = 1 + 2 * 3;
    if result9 != 7 {
        return 9;  // 1 + 2 * 3 = 1 + 6 = 7
    }
    
    // 4.2 加减左结合
    var result10: i32 = 10 - 3 - 2;
    if result10 != 5 {
        return 10;  // 10 - 3 - 2 = 7 - 2 = 5（不是 10 - 1 = 9）
    }
    
    var result11: i32 = 1 + 2 + 3;
    if result11 != 6 {
        return 11;  // 1 + 2 + 3 = 3 + 3 = 6
    }
    
    // ========== 测试5：比较运算符优先级 ==========
    
    // 5.1 比较运算符优先级低于加减
    var result12: bool = 1 + 2 < 5;
    if result12 != true {
        return 12;  // 1 + 2 < 5 = 3 < 5 = true
    }
    
    var result13: bool = 10 - 3 > 5;
    if result13 != true {
        return 13;  // 10 - 3 > 5 = 7 > 5 = true
    }
    
    // 5.2 比较运算符左结合（但通常不链式使用）
    var a: i32 = 5;
    var b: i32 = 10;
    var c: i32 = 15;
    var result14: bool = a < b && b < c;
    if result14 != true {
        return 14;  // 5 < 10 && 10 < 15 = true && true = true
    }
    
    // ========== 测试6：相等性运算符优先级 ==========
    
    // 6.1 相等性运算符优先级低于比较运算符
    var result15: bool = 1 + 2 == 3;
    if result15 != true {
        return 15;  // 1 + 2 == 3 = 3 == 3 = true
    }
    
    var result16: bool = 5 < 10 == true;
    if result16 != true {
        return 16;  // 5 < 10 == true = true == true = true
    }
    
    // ========== 测试7：逻辑与运算符优先级 ==========
    
    // 7.1 逻辑与优先级高于逻辑或
    var result17: bool = true || false && false;
    if result17 != true {
        return 17;  // true || false && false = true || false = true（不是 true && false = false）
    }
    
    var result18: bool = false && true || true;
    if result18 != true {
        return 18;  // false && true || true = false || true = true
    }
    
    // 7.2 逻辑与左结合
    var result19: bool = true && true && false;
    if result19 != false {
        return 19;  // true && true && false = true && false = false
    }
    
    // ========== 测试8：逻辑或运算符优先级 ==========
    
    // 8.1 逻辑或优先级低于逻辑与
    var result20: bool = false && true || true;
    if result20 != true {
        return 20;  // false && true || true = false || true = true
    }
    
    // 8.2 逻辑或左结合
    var result21: bool = false || false || true;
    if result21 != true {
        return 21;  // false || false || true = false || true = true
    }
    
    // ========== 测试9：赋值运算符优先级 ==========
    
    // 9.1 赋值运算符优先级最低
    var var1: i32 = 10;
    var var2: i32 = 20;
    var var3: i32 = 0;
    var3 = var1 + var2;
    if var3 != 30 {
        return 22;  // var3 = 10 + 20 = 30
    }
    
    // 9.2 赋值右结合
    var var4: i32 = 1;
    var var5: i32 = 2;
    var var6: i32 = 3;
    var4 = var5 = var6;
    if var4 != 3 || var5 != 3 {
        return 23;  // var4 = var5 = 3，所以 var4 = 3, var5 = 3
    }
    
    // ========== 测试10：复杂表达式 ==========
    
    // 10.1 复杂混合表达式
    var result22: i32 = 2 * 3 + 4 * 5;
    if result22 != 26 {
        return 24;  // 2 * 3 + 4 * 5 = 6 + 20 = 26
    }
    
    var result23: bool = 1 + 2 * 3 == 7 && 10 > 5;
    if result23 != true {
        return 25;  // 1 + 2 * 3 == 7 && 10 > 5 = 7 == 7 && true = true && true = true
    }
    
    var result24: bool = !false && 5 < 10 || 3 > 5;
    if result24 != true {
        return 26;  // !false && 5 < 10 || 3 > 5 = true && true || false = true || false = true
    }
    
    // 所有测试通过
    return 0;
}

