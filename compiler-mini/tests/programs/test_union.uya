// 联合体（union）测试：定义、创建、match 访问
// 返回 0 表示通过

union IntOrFloat {
    i: i32,
    f: f64,
}

fn main() i32 {
    // 创建联合体值
    const vi: IntOrFloat = IntOrFloat.i(42);
    const vf: IntOrFloat = IntOrFloat.f(3.14);

    // match 提取并检查
    const ri: i32 = match vi {
        .i(x) => x,
        .f(_) => 0,
    };
    if ri != 42 { return 1; }

    const rf: f64 = match vf {
        .i(_) => 0.0,
        .f(x) => x,
    };
    if rf < 3.13 || rf > 3.15 { return 2; }

    // match 作为语句
    var n: i32 = 0;
    match vi {
        .i(x) => { n = x; },
        .f(_) => { n = -1; },
    };
    if n != 42 { return 3; }

    return 0;
}
