// 指针解引用赋值测试程序
// 测试指针解引用赋值功能：*p = value

// 测试1：指针类型函数参数和通过指针修改值
fn set_value(p: &i32, value: i32) void {
    // 通过指针解引用修改值
    *p = value;
}

// 测试2：指针类型函数参数和读取值
fn get_value(p: &i32) i32 {
    // 通过指针解引用读取值
    return *p;
}

fn main() i32 {
    // 测试1：指针变量声明和初始化（使用取地址运算符）
    var x: i32 = 42;
    var p: &i32 = &x;
    
    // 测试2：指针解引用读取值
    const value: i32 = *p;
    if value != 42 {
        return 1;  // 解引用应该得到 42
    }
    
    // 测试3：通过指针修改值（使用函数）
    set_value(p, 100);
    if x != 100 {
        return 1;  // x 应该被修改为 100
    }
    
    // 测试4：通过指针读取值（使用函数）
    const read_value: i32 = get_value(p);
    if read_value != 100 {
        return 1;  // 应该读取到 100
    }
    
    // 测试5：直接通过指针解引用赋值（不使用函数）
    *p = 200;
    if x != 200 {
        return 1;  // x 应该被修改为 200
    }
    
    // 所有测试通过
    return 0;
}

