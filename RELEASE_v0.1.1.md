# Uya v0.1.1 版本说明

**发布日期**：2026-01-31

本版本在 v0.1.0 基础上新增 **f32 / f64 浮点类型** 支持，完成规范、C 编译器、自举编译器的同步实现，并通过自举对比验证。

---

## 核心变更

### 浮点类型支持

- **f32**：32 位浮点数（IEEE 754 单精度），4 字节
- **f64**：64 位浮点数（IEEE 754 双精度），8 字节
- **浮点字面量**：支持 `3.14`、`1.5e1`、`2.5E-3` 等形式
- **运算**：`+` `-` `*` `/`（不含 `%`），f32 与 f64 可混合运算，结果为 f64
- **比较**：`==` `!=` `<` `>` `<=` `>=`
- **类型转换**：f32 ↔ f64，i32 ↔ f32 / f64（显式 `as`）

### 实现范围

| 模块 | C 编译器 | 自举编译器 |
|------|----------|------------|
| 词法 | TOKEN_FLOAT，浮点字面量解析 | ✓ |
| 语法 | f32/f64 类型、sizeof/alignof | ✓ |
| 类型检查 | TYPE_F32/TYPE_F64，运算与转换规则 | ✓ |
| LLVM 后端 | Float/Double 类型与指令 | — |
| C99 后端 | float/double 映射 | ✓ |

---

## 与 v0.1.0 的差异

| 项目 | v0.1.0 | v0.1.1 |
|------|--------|--------|
| 基础类型 | i32, usize, bool, byte, void | 同上 + **f32, f64** |
| 数字字面量 | 仅整数 | 整数 + **浮点（含指数）** |
| 一元负号 | 仅 i32 | i32, **f32, f64** |

---

## 验证

### 测试

```bash
# C 版编译器
./tests/run_programs.sh --c99 tests/programs/test_float.uya

# 自举编译器
./tests/run_programs.sh --uya --c99 tests/programs/test_float.uya
```

### 自举对比

```bash
cd compiler-mini/uya-src
./compile.sh --c99 -b    # C 输出与自举输出逐字节一致 ✓
```

---

## 附录：版本与仓库

- **版本**：v0.1.1
- **基于**：v0.1.0
- **仓库**：<https://github.com/uya-lang/uya>
- **许可**：MIT（见 [LICENSE](LICENSE)）
